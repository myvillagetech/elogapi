"use strict";(self.webpackChunkelog_web=self.webpackChunkelog_web||[]).push([[652],{7652:(j,S,l)=>{l.r(S),l.d(S,{ActivityModule:()=>li});var u=l(6895),A=l(3060),p=l(4006),T=l(7030),R=l(7335),D=l(4025);const F=["NONE","LOW","MEDIUM","HIGH"],K=["INTERNAL","EVERYONE"],v=["NEW","INPROGRESS","REJECTED","REJECTED","RESOLVED"],W={NEW:[{title:"Start",icon:"play_circle_fill",action:"INPROGRESS"},{title:"Resolve",icon:"assistant_photo",action:"RESOLVED"},{title:"Reject",icon:"cancel",action:"REJECTED"},{title:"Reply",icon:"reply",action:"REPLY"},{title:"Edit",icon:"edit",action:"EDIT"},{title:"Move to Organization",icon:"skip_next",action:"MOVE_TO_ORGANIZATION"},{title:"Archive",icon:"archive",action:"ARCHIVE"},{title:"Delete",icon:"delete_sweep",action:"DELETE"}],INPROGRESS:[{title:"Resolve",icon:"assistant_photo",action:"RESOLVED"},{title:"Reject",icon:"cancel",action:"REJECTED"},{title:"Reply",icon:"reply",action:"REPLY"},{title:"Move to Organisation",icon:"skip_next",action:"MOVE_TO_ORGANIZATION"},{title:"Archive",icon:"archive",action:"ARCHIVE"},{title:"Delete",icon:"delete_sweep",action:"DELETE"}],REJECTED:[{title:"Reopen",icon:"reply",action:"NEW"},{title:"Move to Organisation",icon:"skip_next",action:"MOVE_TO_ORGANIZATION"},{title:"Archive",icon:"archive",action:"ARCHIVE"},{title:"Delete",icon:"delete_sweep",action:"DELETE"}],RESOLVED:[{title:"Reject",icon:"cancel",action:"REJECTED"},{title:"Reply",icon:"reply",action:"REPLY"},{title:"Move to Organisation",icon:"skip_next",action:"MOVE_TO_ORGANIZATION"},{title:"Archive",icon:"archive",action:"ARCHIVE"},{title:"Delete",icon:"delete_sweep",action:"DELETE"}]},X=[{title:"Start",icon:"play_circle_fill",action:"INPROGRESS",displayCondition:(a,o)=>"NEW"===a.status},{title:"Resolve",icon:"assistant_photo",action:"RESOLVE",displayCondition:(a,o)=>("INPROGRESS"===a.status||"NEW"===a.status)&&(a.createdBy===o._id||o.organization.includes(a.assignTo))},{title:"Reject",icon:"cancel",action:"REJECTED",displayCondition:(a,o)=>"REJECTED"!==a.status&&("NEW"===a.status&&a.createdBy===o._id||"INPROGRESS"===a.status&&a.createdBy===o._id||o.organization.includes(a.assignTo)||"RESOLVED"===a.status&&a.createdBy===o._id)},{title:"Reply",icon:"reply",action:"REPLY",displayCondition:(a,o)=>"REJECTED"!==a.status},{title:"Edit",icon:"edit",action:"EDIT",displayCondition:(a,o)=>"NEW"===a.status&&a.createdBy===o._id},{title:"Move to Organization",icon:"skip_next",action:"MOVE_TO_ORGANIZATION",displayCondition:(a,o)=>a.createdBy===o._id&&("NEW"===a.status||"INPROGRESS"===a.status)},{title:"Archive",icon:"archive",action:"ARCHIVE",displayCondition:(a,o)=>a.createdBy===o._id&&("NEW"===a.status||"INPROGRESS"===a.status)},{title:"Delete",icon:"delete_sweep",action:"DELETE",displayCondition:(a,o)=>"NEW"===a.status&&a.createdBy===o._id},{title:"Reopen",icon:"reply",action:"NEW",displayCondition:(a,o)=>"REJECTED"===a.status}],tt=[{propertyName:"title",displayName:"Title"},{propertyName:"description",displayName:"Description"},{propertyName:"status",displayName:"Status"},{propertyName:"priority",displayName:"Priority"},{propertyName:"assignedTo",displayName:"Assigned To"},{propertyName:"dueDate",displayName:"Due Date"},{propertyName:"createdDate",displayName:"Create Date"}];var t=l(4650),I=l(5641),P=l(4068),k=l(2653),z=l(9642),et=l(1584);let Q=(()=>{class a{constructor(){}downloadFile(e,i="data",n){let c=this.ConvertToCSV(e,n),s=new Blob(["\ufeff"+c],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),d=URL.createObjectURL(s);-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&r.setAttribute("target","_blank"),r.setAttribute("href",d),r.setAttribute("download",i+".csv"),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}ConvertToCSV(e,i){let n="object"!=typeof e?JSON.parse(e):e,c="",s="S.No,";for(let r in i)s+=i[r].displayName+",";s=s.slice(0,-1),c+=s+"\r\n";for(let r=0;r<n.length;r++){let d=r+1+"";for(let m in i)d+=","+n[r][i[m].propertyName];c+=d+"\r\n"}return c}}return a.\u0275fac=function(e){return new(e||a)},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var U=l(9690),M=l(9732),O=l(3238),E=l(4859),h=l(9602),N=l(7392),f=l(9549),Y=l(4144),C=l(8255),q=l(1948),L=l(4385),B=l(266),_=l(5869);let H=(()=>{class a{constructor(e){this.fb=e,this.value="<h3>Write Here....</h3>",this.updatedDescription=new t.vpe,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]]}ngOnInit(){this.editor=new _.ML,this.editor.commands.focus().scrollIntoView().exec(),this.createformgroup(),this.richtextForm?.controls.description?.valueChanges.subscribe(e=>{this.updatedDescription.emit(e)})}createformgroup(){this.richtextForm=this.fb.group({description:[""]})}ngOnDestroy(){this.editor.destroy()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(p.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-rich-text-editor"]],inputs:{value:"value"},outputs:{updatedDescription:"updatedDescription"},decls:3,vars:6,consts:[[3,"formGroup"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngModel"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"ngx-editor-menu",1)(2,"ngx-editor",2),t.qZA()),2&e&&(t.Q6J("formGroup",i.richtextForm),t.xp6(1),t.Q6J("editor",i.editor)("toolbar",i.toolbar),t.xp6(1),t.Q6J("editor",i.editor)("placeholder","Type here...")("ngModel",i.value))},dependencies:[_.tP,_.Mn,p._Y,p.JJ,p.JL,p.sg,p.u]}),a})();function it(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-icon"),t._uU(3,"insert_drive_file"),t.qZA()(),t.TgZ(4,"div",8)(5,"h4",9),t._uU(6),t.qZA(),t.TgZ(7,"p",10),t._uU(8),t.qZA()(),t.TgZ(9,"div",11),t.NdJ("click",function(){const c=t.CHM(e).index,s=t.oxw();return t.KtG(s.deleteFile(c))}),t.TgZ(10,"mat-icon"),t._uU(11,"delete_forever"),t.qZA()()()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(6),t.hij(" ",null==e?null:e.name," "),t.xp6(2),t.hij(" ",i.formatBytes(null==e?null:e.size)," ")}}let $=(()=>{class a{constructor(e){this.alertpopupService=e,this.updatedFilesDescription=new t.vpe,this.value=!1,this.files=[]}onFileDropped(e){this.prepareFilesList(e)}ngOnChanges(e){!1===e.value.currentValue&&(this.files=[])}fileBrowseHandler(e){this.prepareFilesList(e.target.files)}deleteFile(e){this.files.splice(e,1)}prepareFilesList(e){for(const i of e)"image/jpeg"==i.type||"text/plain"==i.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==i.type||"image/png"==i.type||"application/vnd.openxmlformats-officedocument.presentationml.presentation"==i.type||"application/pdf"==i.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==i.type&&i.size<=262144e3?this.files.push(i):this.alertpopupService.open({message:`${i.type} is not accept `,action:"ok"});this.updatedFilesDescription.emit(this.files)}formatBytes(e,i){if(0===e)return"0 Bytes";const c=i<=0?0:i||2,r=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,r)).toFixed(c))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(k.z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-fileuploader"]],inputs:{value:"value"},outputs:{updatedFilesDescription:"updatedFilesDescription"},features:[t.TTD],decls:13,vars:1,consts:[["appDnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],[1,"single-file"],[1,"file-icon",2,"width","50px"],[1,"info"],[1,"name"],[1,"size"],[1,"delete",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("fileDropped",function(c){return i.onFileDropped(c)}),t.TgZ(1,"input",1,2),t.NdJ("change",function(c){return i.fileBrowseHandler(c)}),t.qZA(),t.TgZ(3,"mat-icon"),t._uU(4,"upload_file"),t.qZA(),t.TgZ(5,"h3"),t._uU(6,"Drag and drop file here"),t.qZA(),t.TgZ(7,"h3"),t._uU(8,"or"),t.qZA(),t.TgZ(9,"label",3),t._uU(10,"Browse for file"),t.qZA()(),t.TgZ(11,"div",4),t.YNc(12,it,12,2,"div",5),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngForOf",i.files))},dependencies:[u.sg,N.Hw],styles:[".container[_ngcontent-%COMP%]{padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto;background-color:#fff}input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0;cursor:pointer}label[_ngcontent-%COMP%]{color:#fff;border-radius:21.5px;background-color:#db202f;padding:8px 16px}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem;background-color:#fff}.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end;display:flex;flex-grow:1}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}"]}),a})();function at(a,o){if(1&a&&(t.TgZ(0,"span")(1,"mat-icon"),t._uU(2," chat"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.Oqu(null==e.activityData?null:e.activityData.activityLog.length)}}function nt(a,o){if(1&a&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.hij("... + ",(null==e.organizationsInvolved?null:e.organizationsInvolved.length)-1," more")}}function ot(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"attach_file"),t.qZA())}function ct(a,o){if(1&a&&(t.TgZ(0,"p")(1,"mat-icon"),t._uU(2,"insert_drive_file"),t.qZA(),t._uU(3),t.ALo(4,"number"),t.qZA()),2&a){const e=o.$implicit;t.xp6(3),t.AsE("",null==e?null:e.name," ",t.xi3(4,2,(null==e?null:e.size)/1024,".2-2")," Kb ")}}function st(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"attach_file"),t.qZA())}function rt(a,o){if(1&a&&(t.TgZ(0,"p")(1,"mat-icon"),t._uU(2,"insert_drive_file"),t.qZA(),t._uU(3),t.ALo(4,"number"),t.qZA()),2&a){const e=o.$implicit;t.xp6(3),t.AsE("",null==e?null:e.name," ",t.xi3(4,2,(null==e?null:e.size)/1024,".2-2")," Kb ")}}function lt(a,o){if(1&a&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",40)(3,"div",10)(4,"mat-icon",11),t._uU(5,"account_circle"),t.qZA(),t.TgZ(6,"div",12),t._uU(7),t.TgZ(8,"p"),t._uU(9),t.ALo(10,"date"),t.qZA()()(),t.TgZ(11,"span",52)(12,"strong"),t._uU(13),t.ALo(14,"titlecase"),t.qZA()(),t.TgZ(15,"div")(16,"p"),t._uU(17),t.ALo(18,"titlecase"),t.qZA()(),t.TgZ(19,"div")(20,"p"),t._uU(21),t.qZA()()(),t._UZ(22,"div",13),t.TgZ(23,"div",10),t.YNc(24,st,2,0,"mat-icon",4),t.TgZ(25,"div"),t.YNc(26,rt,5,5,"p",14),t.qZA()()()()),2&a){const e=o.$implicit,i=t.oxw();t.xp6(7),t.hij(" Created by ",e.createdByUserName," "),t.xp6(2),t.Oqu(t.xi3(10,8,e.updatedAt,"medium")),t.xp6(4),t.Oqu(t.lcZ(14,11,e.title)),t.xp6(4),t.hij("Status: ",t.lcZ(18,13,e.status),""),t.xp6(4),t.hij("Assigned To: ",i.selectedActivityAssignedTo," "),t.xp6(1),t.Q6J("innerHTML",e.message,t.oJD),t.xp6(2),t.Q6J("ngIf",(null==e||null==e.attachments?null:e.attachments.length)>=1),t.xp6(2),t.Q6J("ngForOf",null==e?null:e.attachments)}}function pt(a,o){if(1&a&&(t.TgZ(0,"mat-option",24),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.organization,"")}}function ut(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",61),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.updateActivityDetails())}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function dt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.updateStatusOfSelectedActivity("Resolve"))}),t.TgZ(1,"mat-icon"),t._uU(2,"assistant_photo"),t.qZA()()}}function mt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.updateStatusOfSelectedActivity("Reject"))}),t.TgZ(1,"mat-icon"),t._uU(2,"checkmark"),t.qZA()()}}function _t(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",53)(2,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.refreshPage())}),t.TgZ(3,"mat-icon"),t._uU(4,"refresh"),t.qZA()(),t.YNc(5,ut,3,0,"button",55),t.TgZ(6,"button",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.updateSelectedArchiveStatus())}),t.TgZ(7,"mat-icon"),t._uU(8,"archive"),t.qZA()(),t.TgZ(9,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.deleteSelectedActivity())}),t.TgZ(10,"mat-icon"),t._uU(11,"delete"),t.qZA()(),t.YNc(12,dt,3,0,"button",58),t.YNc(13,mt,3,0,"button",59),t.TgZ(14,"button",60),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.downloadActivity())}),t.TgZ(15,"mat-icon"),t._uU(16,"download"),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf","NEW"===(null==e.activityData?null:e.activityData.status)),t.xp6(7),t.Q6J("ngIf","NEW"===(null==e.activityData?null:e.activityData.status)||"INPROGRESS"===(null==e.activityData?null:e.activityData.status)),t.xp6(1),t.Q6J("ngIf","REJECTED"!==(null==e.activityData?null:e.activityData.status))}}function gt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",56),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.updateSelectedArchiveStatus())}),t.TgZ(1,"mat-icon"),t._uU(2,"archive"),t.qZA()()}}function yt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(3);return t.KtG(n.deleteSelectedActivity())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function vt(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",53)(2,"button",64),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.refreshPage())}),t.TgZ(3,"mat-icon"),t._uU(4,"refresh"),t.qZA()(),t.YNc(5,gt,3,0,"button",65),t.YNc(6,yt,3,0,"button",66),t.TgZ(7,"button",60),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.downloadActivity())}),t.TgZ(8,"mat-icon"),t._uU(9,"download"),t.qZA()()(),t.BQk()}if(2&a){const e=t.oxw(2);t.xp6(5),t.Q6J("ngIf","NEW"===(null==e.activityData?null:e.activityData.status)||"INPROGRESS"===(null==e.activityData?null:e.activityData.status)||"REJECTED"===(null==e.activityData?null:e.activityData.status)),t.xp6(1),t.Q6J("ngIf","NEW"===(null==e.activityData?null:e.activityData.status)||"REJECTED"===(null==e.activityData?null:e.activityData.status))}}function ht(a,o){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",53)(2,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.refreshPage())}),t.TgZ(3,"mat-icon"),t._uU(4,"refresh"),t.qZA()(),t.TgZ(5,"button",60),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.downloadActivity())}),t.TgZ(6,"mat-icon"),t._uU(7,"download"),t.qZA()()(),t.BQk()}}function ft(a,o){if(1&a&&(t.TgZ(0,"div",35),t.YNc(1,_t,17,3,"ng-container",4),t.YNc(2,vt,10,2,"ng-container",4),t.YNc(3,ht,8,0,"ng-container",4),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isSuperAdmin),t.xp6(1),t.Q6J("ngIf",e.logedInUserId===e.selectedActivityCreatedById&&!e.isSuperAdmin),t.xp6(1),t.Q6J("ngIf",e.logedInUserId!==e.selectedActivityCreatedById&&!e.isSuperAdmin)}}function At(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div",35)(1,"button",54),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.refreshPage())}),t.TgZ(2,"mat-icon"),t._uU(3,"refresh"),t.qZA()(),t.TgZ(4,"button",67),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.restoreActivity())}),t.TgZ(5,"mat-icon"),t._uU(6,"restore"),t.qZA()(),t.TgZ(7,"button",57),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.deleteSelectedActivity())}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()(),t.TgZ(10,"button",60),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.downloadActivity())}),t.TgZ(11,"mat-icon"),t._uU(12,"download"),t.qZA()()()}}function Tt(a,o){if(1&a&&(t.TgZ(0,"div")(1,"div"),t._uU(2),t.ALo(3,"date"),t.qZA(),t.TgZ(4,"div"),t._uU(5),t.qZA(),t._UZ(6,"hr"),t.qZA()),2&a){const e=o.$implicit;t.xp6(2),t.hij(" Due Date ",t.xi3(3,2,null==e?null:e.dueDate,"medium")," "),t.xp6(3),t.hij("Updated by ",null==e?null:e.createdByUserName,"")}}function Dt(a,o){if(1&a&&(t.TgZ(0,"div")(1,"div",68)(2,"div",10)(3,"mat-icon"),t._uU(4,"insert_drive_file"),t.qZA(),t.TgZ(5,"span"),t._uU(6),t.TgZ(7,"small"),t._uU(8),t.ALo(9,"number"),t.qZA()()(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"date"),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(6),t.hij("",null==e?null:e.name," "),t.xp6(2),t.hij("",t.xi3(9,3,(null==e?null:e.size)/1024,".2-2")," Kb"),t.xp6(3),t.Oqu(t.xi3(12,6,null==e?null:e.updatedAt,"medium"))}}function Ct(a,o){if(1&a&&(t.TgZ(0,"div",69)(1,"p")(2,"span",50),t._uU(3),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA()()),2&a){const e=o.$implicit;t.xp6(3),t.hij("",e.status,":"),t.xp6(1),t.hij(" ",t.xi3(5,2,e.updatedAt,"medium")," ")}}function Zt(a,o){if(1&a&&(t.TgZ(0,"div")(1,"span",70)(2,"mat-icon",71),t._uU(3,"account_circle"),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(2),t.s9C("matTooltip",e.organization)}}function bt(a,o){if(1&a&&(t.TgZ(0,"div")(1,"span",70)(2,"mat-icon",71),t._uU(3,"account_circle"),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(2),t.s9C("matTooltip",e.organization)}}let xt=(()=>{class a{constructor(e,i,n,c,s,r,d,m,y,b,x){this.activatedRoute=e,this.activityService=i,this.formBuilder=n,this.organizationService=c,this.router=s,this.alertpopupService=r,this.confirmationDialogService=d,this.userService=m,this.csvHelperService=y,this.storageService=b,this.userDetailsService=x,this.Priority=F,this.visibility=K,this.status=v,this.filesListArray=[],this.description="",this.toDay=new Date,this.isFilesListArray=!0,this.activatedRoute.queryParams.subscribe(w=>{this.selectedActivityId=w.aId})}ngOnInit(){this.getActivityDetailsById(),this.getActivityMasterData(),this.getAllOrganizationsBySearchCriteria(),this.genarateActivityLogForm(),this.isSuperAdmin=this.storageService.getDataFromLocalStorage(D.I.ROLE)===R.G.SuperAdmin,this.logedInUserId=this.storageService.getDataFromLocalStorage(D.I.USER_ID),this.minDate=new Date}getActivityDetailsById(){this.activityService.getActivityById(this.selectedActivityId).subscribe(e=>{this.activityData=e.data[0],this.selectedActivityEntryTypeId=e.data[0]?.activitEntryType,this.selectedActivityRelatedTypeId=e.data[0]?.activityRelatedTo,this.selectedActivitySectorId=e.data[0]?.activitySector,this.selectedActivityScopeId=e.data[0]?.activityScope,this.selectedActivityCreatedById=e.data[0]?.createdBy,this.organizationCreatedBy=this.activityData?.createdByOrganizationData[0]?.organization,this.activityLogData=this.activityData?.activityLog,this.isArchive=this.activityData?.isArchive,this.selectedActivityTypeId=this.activityData?.activityType,this.organizationsInvolved=this.activityData?.organizationData,this.ministryName=this.activityData?.organizationData.map(i=>i.organization),this.selectedActivityAssignedTo=this.activityData?.organizationData.filter(i=>i._id==this.activityData?.assignTo).map(i=>i.organization),this.getUserById(),this.getLogedInUserDetails(),this.ActivityTimeLogs=this.activityData?.statusLog,this.activityLogForm.controls.priority.setValue(this.activityData?.priority),this.activityLogForm.controls.status.setValue(this.activityData?.status),this.activityLogForm.controls.assignTo.setValue(this.activityData?.assignTo)})}getLogedInUserDetails(){this.userDetailsService.getUserDetails().subscribe(e=>{this.logedInUserDetails=e,this.isAssignee=e?.organization?.includes(this.activityData?.assignTo)})}getActivityMasterData(){this.activityService.getActivitiesMasterData().subscribe(e=>{this.activityEntryType=e.data?.activityEntryTypesData.filter(i=>i._id==this.selectedActivityEntryTypeId).map(i=>i.name),this.activityRelatedTypesData=e.data?.activityRelatedTypesData.filter(i=>i._id==this.selectedActivityRelatedTypeId).map(i=>i.name),this.activitySectorsData=e.data?.activitySectorsData.filter(i=>i._id==this.selectedActivitySectorId).map(i=>i.name),this.ActivityScopeData=e.data?.activityScopesData.filter(i=>i._id==this.selectedActivityScopeId).map(i=>i.name),this.activityType=e?.data?.activityTypesData.filter(i=>i._id==this.selectedActivityTypeId).map(i=>i.name)})}getUserById(){this.userService.getUserById(this.activityData?.createdBy).subscribe(e=>{this.activityReportedBy=e?.existingUser?.Name})}genarateActivityLogForm(){this.activityLogForm=this.formBuilder.group({priority:["",[p.kI.required]],visibility:["",[p.kI.required]],status:["",[p.kI.required]],assignTo:["",[p.kI.required]],attachments:["",[p.kI.required]]})}onSubmit(){const e={...this.activityLogForm.value,attachments:0===this.filesListArray.length?void 0:this.filesListArray,message:this.description};this.activityService.updateActivityLogById(this.selectedActivityId,e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity Updated Successfully",action:"ok"}),this.getActivityDetailsById(),this.activityLogForm?.reset(),this.description="",this.isFilesListArray=!1},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}getAllOrganizationsBySearchCriteria(){this.organizationService.getOrganizationsSearchCriteria({pageNumber:0,pageSize:50,sortField:"",sortOrder:0,type:"63973bfb61ab6f49bfdd3c35",organization:"",organizationId:"",isActive:!0,userId:"",userSearch:""}).subscribe(i=>{this.organizationList=i.data.organizations})}updatedDescription(e){this.description=e}updatedFilesDescription(e){for(var i=0;i<e.length;i++)this.filesListArray.push({name:e[i].name,size:e[i].size,path:"string"})}updateActivityDetails(){this.router.navigate([T.p.CREATEACTIVITY],{queryParams:{aId:this.selectedActivityId}})}dueDateSetter(e,i){"noDueDate"==e?this.selectedDate="":"Today"==e?this.selectedDate=new Date:"Tomorrow"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+1)):"Next Monday"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+(7-this.toDay.getDay())%7+1)):"This Friday"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+(12-this.toDay.getDay())%7)):"custom"==e&&(this.selectedDate=i.value),this.activityService.updateActivityDueDate(this.selectedActivityId,{dueDate:this.selectedDate}).subscribe(n=>{this.alertpopupService.open({message:n.message,action:"ok"}),this.getActivityDetailsById()},n=>{this.alertpopupService.open({message:"Faild to create Organization! Please try again ",action:"ok"})})}updateSelectedArchiveStatus(){const e={isArchive:!0};this.confirmationDialogService.open({message:`Are you sure you want to archive ${this.activityData?.uniqIdentity}`}).afterClosed().subscribe(i=>{i&&this.activityService.updateArchivestatus(this.selectedActivityId,e).subscribe(n=>{this.alertpopupService.open({message:n.message,action:"ok"}),this.getActivityDetailsById()},n=>{this.alertpopupService.open({message:"Faild to archive Organization! Please try again ",action:"ok"})})})}restoreActivity(){const e={isArchive:!1};this.confirmationDialogService.open({message:`Are you sure you want to restore ${this.activityData?.uniqIdentity}`}).afterClosed().subscribe(i=>{i&&this.activityService.updateArchivestatus(this.selectedActivityId,e).subscribe(n=>{this.alertpopupService.open({message:"Activity Restored Successfully",action:"ok"}),this.getActivityDetailsById()},n=>{this.alertpopupService.open({message:"Faild to Restored Organization! Please try again ",action:"ok"})})})}deleteSelectedActivity(){this.confirmationDialogService.open({message:`Are you sure you want to delete ${this.activityData?.uniqIdentity}`}).afterClosed().subscribe(e=>{e&&this.activityService.deleteSelectedActivity(this.selectedActivityId).subscribe(i=>{this.alertpopupService.open({message:i.message,action:"ok"}),this.getActivityDetailsById()},i=>{this.alertpopupService.open({message:"Faild to create Organization! Please try again ",action:"ok"})})})}updateStatusOfSelectedActivity(e){let i="";"Reject"==e?i=v[2]:"Resolve"==e&&(i=v[4]);const n={status:i};this.confirmationDialogService.open({message:`Are you sure you want to ${e} ${this.activityData?.uniqIdentity}`}).afterClosed().subscribe(c=>{c&&this.activityService.updateActivityStatus(this.selectedActivityId,n).subscribe(s=>{this.alertpopupService.open({message:s.message,action:"ok"}),this.getActivityDetailsById()},s=>{this.alertpopupService.open({message:"Faild to create Organization! Please try again ",action:"ok"})})})}downloadActivity(){let e=[...this.activityData.activityLog,...this.activityData.dueDateLog];e=e.sort((c,s)=>new Date(s.createdAt).valueOf()-new Date(c.createdAt).valueOf());let i=[{title:this.activityData.title,description:this.activityData.description.replace(/<[^>]*>/g,""),status:this.activityData.status,assignedTo:this.selectedActivityAssignedTo.toString(),dueDate:this.activityData.dueDate,attachments:0==this.activityData.attachments.length?"NO":this.activityData.attachments[0].name.toString(),priority:this.activityData.priority,type:this.activityType.toString(),sector:this.activitySectorsData.toString(),entryType:this.activityEntryType.toString(),ministry:this.organizationsInvolved[0].organization,scope:this.ActivityScopeData.toString(),relatedTo:this.activityRelatedTypesData.toString(),categoryMappedTo:"",activityprogress:""}];e.forEach((c,s)=>{let r=i[s];c.dueDate?(r.dueDate=c.dueDate,i=[...i,r]):c.message&&(r.description=c?.message.replace(/<[^>]*>/g,""),r.status=c?.status?c.status:r.status,r.priority=c?.priority?c.priority:r.priority,i=[...i,r])}),this.csvHelperService.downloadFile(i,"activity details",[{propertyName:"title",displayName:"Title"},{propertyName:"description",displayName:"Description"},{propertyName:"status",displayName:"Status"},{propertyName:"assignedTo",displayName:"Assigned To"},{propertyName:"dueDate",displayName:"Due Date"},{propertyName:"attachments",displayName:"Attachments"},{propertyName:"priority",displayName:"Priority"},{propertyName:"type",displayName:"Type"},{propertyName:"sector",displayName:"Sector"},{propertyName:"entryType",displayName:"Entry Type"},{propertyName:"ministry",displayName:"Ministry/Department"},{propertyName:"scope",displayName:"Scope"},{propertyName:"relatedTo",displayName:"Related To"}])}refreshPage(){this.getActivityDetailsById()}resetActivityLogForm(){this.activityLogForm.reset()}navigateToPreviousRoute(){this.router.navigate([T.p.ACTIVITY])}statusClass(e){return"MEDIUM"===e?"confirm":"HIGH"===e?"reject":""}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(A.gz),t.Y36(I.M),t.Y36(p.qu),t.Y36(P.M),t.Y36(A.F0),t.Y36(k.z),t.Y36(z.O),t.Y36(et.K),t.Y36(Q),t.Y36(U.V),t.Y36(M.H))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity-details"]],decls:237,vars:73,consts:[[1,"btn-back","btn","btn-primary","btn-sm",3,"click"],[1,"row"],[1,"col-md-9"],[1,"activity-data"],[4,"ngIf"],[1,"col-md-4"],[1,"table","table-borderless"],[3,"matTooltip"],[1,"col-md-12","my-2"],[1,"activity_card"],[1,"d-flex"],[1,"mat-i"],[1,"card-created"],[3,"innerHTML"],[4,"ngFor","ngForOf"],["class","col-md-12 my-2",4,"ngFor","ngForOf"],[1,"logform","mt-4"],[3,"formGroup","ngSubmit"],[1,"row","mb-3"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],[3,"value","updatedDescription"],["appearance","outline"],["formControlName","status"],[3,"value"],["aria-label","","formControlName","priority"],["aria-label","","formControlName","visibility","layout","row"],["formControlName","assignTo"],[3,"value",4,"ngFor","ngForOf"],[3,"value","updatedFilesDescription"],[1,"d-flex","justify-content-end","align-items-center"],["type","button","mat-raised-button","",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],[1,"col-md-3","active_right_panel"],["class","activity_widget",4,"ngIf"],[1,"activity_widget"],[1,"d-flex","align-items-center"],[1,"mat-Icon"],["data-toggle","dropdown",1,"quick-action","mb-0"],[1,"activity_widget","date_ragne"],[1,"d-flex","justify-content-between"],["mat-button","",3,"matMenuTriggerFor"],["dueDateLogMenu","matMenu"],["dueDateFiltersMatMenu","matMenu"],["mat-menu-item","",3,"click"],["matInput","",3,"matDatepicker","min","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"d-flex","flex-wrap","activity_widget"],[1,""],[1,"activity_status"],["class","my-2",4,"ngFor","ngForOf"],[1,"organization-title"],[1,"d-flex","justify-content-start"],["mat-stroked-button","","matTooltip","Reload",1,"padding",3,"click"],["mat-stroked-button","","class","padding","matTooltip","Edit",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Archive",1,"padding",3,"click"],["mat-stroked-button","","matTooltip","Delete",1,"padding",3,"click"],["mat-stroked-button","","class","padding","matTooltip","Resolve",3,"click",4,"ngIf"],["mat-stroked-button","","class","padding","matTooltip","Reject",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Download",1,"padding",3,"click"],["mat-stroked-button","","matTooltip","Edit",1,"padding",3,"click"],["mat-stroked-button","","matTooltip","Resolve",1,"padding",3,"click"],["mat-stroked-button","","matTooltip","Reject",1,"padding",3,"click"],["mat-stroked-button","","matTooltip","Refresh",1,"padding",3,"click"],["mat-stroked-button","","class","padding","matTooltip","Archive",3,"click",4,"ngIf"],["mat-stroked-button","","class","padding","matTooltip","Delete",3,"click",4,"ngIf"],["mat-stroked-button","","matTooltip","Restore",1,"padding",3,"click"],[1,"file-data"],[1,"my-2"],[1,"d-flex","align-items-center","justify-content-center"],[1,"mat-i",3,"matTooltip"]],template:function(e,i){if(1&e&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return i.navigateToPreviousRoute()}),t.TgZ(1,"mat-icon"),t._uU(2,"keyboard_return"),t.qZA(),t._uU(3," Back To Activities"),t.qZA(),t.TgZ(4,"div",1)(5,"div",2)(6,"div",3)(7,"h2"),t._uU(8),t.ALo(9,"titlecase"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"date"),t.YNc(13,at,4,1,"span",4),t.qZA(),t.TgZ(14,"div",1)(15,"div",5)(16,"table",6)(17,"tbody")(18,"tr")(19,"td"),t._uU(20,"Type"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()(),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Entry Type:"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA()(),t.TgZ(28,"tr")(29,"td"),t._uU(30,"Related To:"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.qZA()(),t.TgZ(33,"tr")(34,"td"),t._uU(35,"Priority:"),t.qZA(),t.TgZ(36,"td"),t._uU(37),t.ALo(38,"titlecase"),t.qZA()(),t.TgZ(39,"tr")(40,"td"),t._uU(41,"Status:"),t.qZA(),t.TgZ(42,"td"),t._uU(43),t.ALo(44,"titlecase"),t.qZA()()()()(),t.TgZ(45,"div",5)(46,"table",6)(47,"tbody")(48,"tr")(49,"td"),t._uU(50,"Reported By:"),t.qZA(),t.TgZ(51,"td"),t._uU(52),t.qZA()(),t.TgZ(53,"tr")(54,"td"),t._uU(55,"Ministry/Department:"),t.qZA(),t.TgZ(56,"td",7),t._uU(57),t.YNc(58,nt,2,1,"span",4),t.qZA()(),t.TgZ(59,"tr")(60,"td"),t._uU(61,"Organization:"),t.qZA(),t.TgZ(62,"td"),t._uU(63),t.qZA()()()()(),t.TgZ(64,"div",5)(65,"table",6)(66,"tbody")(67,"tr")(68,"td"),t._uU(69,"Sector:"),t.qZA(),t.TgZ(70,"td"),t._uU(71),t.qZA()(),t.TgZ(72,"tr")(73,"td"),t._uU(74,"Scope:"),t.qZA(),t.TgZ(75,"td"),t._uU(76),t.qZA()()()()(),t.TgZ(77,"div")(78,"div",8)(79,"div",9)(80,"div",10)(81,"div",10)(82,"mat-icon",11),t._uU(83,"account_circle"),t.qZA()(),t.TgZ(84,"div",12),t._uU(85," Created by "),t.TgZ(86,"strong"),t._uU(87),t.qZA(),t.TgZ(88,"p"),t._uU(89),t.ALo(90,"date"),t.qZA()()(),t._UZ(91,"div",13),t.TgZ(92,"div",10),t.YNc(93,ot,2,0,"mat-icon",4),t.TgZ(94,"div"),t.YNc(95,ct,5,5,"p",14),t.qZA()()(),t.YNc(96,lt,27,15,"div",15),t.TgZ(97,"div",16)(98,"form",17),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(99,"div",18)(100,"label",19),t._uU(101," Write your Reply: "),t.qZA(),t.TgZ(102,"div",20)(103,"app-rich-text-editor",21),t.NdJ("updatedDescription",function(c){return i.updatedDescription(c)}),t.qZA()()(),t.TgZ(104,"div",18)(105,"label",19),t._uU(106," Status: "),t.qZA(),t.TgZ(107,"div",20)(108,"mat-form-field",22)(109,"mat-select",23)(110,"mat-option",24),t._uU(111,"New"),t.qZA(),t.TgZ(112,"mat-option",24),t._uU(113,"In Progress"),t.qZA(),t.TgZ(114,"mat-option",24),t._uU(115,"Resolved"),t.qZA(),t.TgZ(116,"mat-option",24),t._uU(117,"Not Admissible"),t.qZA()()()()(),t.TgZ(118,"div",18)(119,"label",19),t._uU(120," Priority: "),t.qZA(),t.TgZ(121,"div",20)(122,"mat-radio-group",25)(123,"mat-radio-button",24),t._uU(124,"None"),t.qZA(),t.TgZ(125,"mat-radio-button",24),t._uU(126,"Low"),t.qZA(),t.TgZ(127,"mat-radio-button",24),t._uU(128,"Medium"),t.qZA(),t.TgZ(129,"mat-radio-button",24),t._uU(130,"High"),t.qZA()()()(),t.TgZ(131,"div",18)(132,"label",19),t._uU(133," Visibility: "),t.qZA(),t.TgZ(134,"div",20)(135,"mat-radio-group",26)(136,"mat-radio-button",24),t._uU(137,"Internal"),t.qZA(),t.TgZ(138,"mat-radio-button",24),t._uU(139,"Everyone"),t.qZA()()()(),t.TgZ(140,"div",18)(141,"label",19),t._uU(142," Assign to "),t.qZA(),t.TgZ(143,"div",20)(144,"mat-form-field",22)(145,"mat-select",27),t.YNc(146,pt,2,2,"mat-option",28),t.qZA()()()(),t.TgZ(147,"div",18)(148,"label",19),t._uU(149," Attachments"),t.qZA(),t.TgZ(150,"div",20)(151,"app-fileuploader",29),t.NdJ("updatedFilesDescription",function(c){return i.updatedFilesDescription(c)}),t.qZA()()(),t.TgZ(152,"div",30)(153,"button",31),t.NdJ("click",function(){return i.resetActivityLogForm()}),t._uU(154,"Cancel"),t.qZA(),t.TgZ(155,"button",32),t._uU(156," Post "),t.qZA()()()()()()()()(),t.TgZ(157,"div",33),t.YNc(158,ft,4,3,"div",34),t.YNc(159,At,13,0,"div",34),t.TgZ(160,"div",35)(161,"div",36)(162,"mat-icon",37),t._uU(163,"folder_shared"),t.qZA(),t.TgZ(164,"h3",38),t._uU(165,"Assigned To"),t.qZA()(),t.TgZ(166,"div",36)(167,"div")(168,"mat-icon",11),t._uU(169,"account_circle"),t.qZA()(),t.TgZ(170,"div")(171,"span"),t._uU(172),t.qZA()()()(),t.TgZ(173,"div",39)(174,"div",40)(175,"div",10)(176,"mat-icon"),t._uU(177," date_range"),t.qZA(),t.TgZ(178,"h3"),t._uU(179),t.ALo(180,"date"),t.qZA()(),t.TgZ(181,"div")(182,"button",41)(183,"mat-icon"),t._uU(184,"edit"),t.qZA()(),t.TgZ(185,"button",41)(186,"mat-icon"),t._uU(187,"view_headline"),t.qZA()(),t.TgZ(188,"mat-menu",null,42),t.YNc(190,Tt,7,5,"div",14),t.qZA()()(),t.TgZ(191,"mat-menu",null,43)(193,"button",44),t.NdJ("click",function(){return i.dueDateSetter("noDueDate")}),t._uU(194," No Due Date "),t.qZA(),t.TgZ(195,"button",44),t.NdJ("click",function(){return i.dueDateSetter("Today")}),t._uU(196,"Today"),t.qZA(),t.TgZ(197,"button",44),t.NdJ("click",function(){return i.dueDateSetter("Tomorrow")}),t._uU(198," Tomorrow "),t.qZA(),t.TgZ(199,"button",44),t.NdJ("click",function(){return i.dueDateSetter("Next Monday")}),t._uU(200," Next Monday "),t.qZA(),t.TgZ(201,"button",44),t.NdJ("click",function(){return i.dueDateSetter("This Friday")}),t._uU(202," This Friday "),t.qZA(),t.TgZ(203,"mat-label"),t._uU(204,"Choose a date"),t.qZA(),t.TgZ(205,"input",45),t.NdJ("dateChange",function(c){return i.dueDateSetter("custom",c)}),t.qZA(),t._UZ(206,"mat-datepicker-toggle",46)(207,"mat-datepicker",null,47),t.qZA()(),t.TgZ(209,"div",48)(210,"mat-icon"),t._uU(211,"attach_file"),t.qZA(),t.TgZ(212,"h3",49),t._uU(213),t.qZA(),t.YNc(214,Dt,13,9,"div",14),t.qZA(),t.TgZ(215,"div",35)(216,"div",10)(217,"mat-icon"),t._uU(218,"timeline"),t.qZA(),t.TgZ(219,"h3",49),t._uU(220,"Activities"),t.qZA()(),t.TgZ(221,"div")(222,"div")(223,"span",50),t._uU(224,"Created:"),t.qZA(),t._uU(225),t.ALo(226,"date"),t.qZA(),t.YNc(227,Ct,6,5,"div",51),t.qZA()(),t.TgZ(228,"div",35)(229,"div",10)(230,"mat-icon"),t._uU(231," supervised_user_circle"),t.qZA(),t.TgZ(232,"h3",49),t._uU(233,"People Involved"),t.qZA()(),t.TgZ(234,"div",10),t.YNc(235,Zt,4,1,"div",14),t.YNc(236,bt,4,1,"div",14),t.qZA()()()()),2&e){const n=t.MAs(189),c=t.MAs(192),s=t.MAs(208);t.xp6(8),t.AsE("",null==i.activityData?null:i.activityData.uniqIdentity," : ",t.lcZ(9,55,null==i.activityData?null:i.activityData.title),""),t.xp6(3),t.hij(" Last updated on ",t.xi3(12,57,null==i.activityData?null:i.activityData.createdAt,"medium")," "),t.xp6(2),t.Q6J("ngIf",(null==i.activityData?null:i.activityData.activityLog.length)>=1),t.xp6(9),t.Oqu(i.activityType),t.xp6(5),t.Oqu(i.activityEntryType),t.xp6(5),t.Oqu(i.activityRelatedTypesData),t.xp6(4),t.Tol(i.statusClass(null==i.activityData?null:i.activityData.priority)),t.xp6(1),t.Oqu(t.lcZ(38,60,null==i.activityData?null:i.activityData.priority)),t.xp6(6),t.Oqu(t.lcZ(44,62,null==i.activityData?null:i.activityData.status)),t.xp6(9),t.Oqu(i.activityReportedBy),t.xp6(4),t.Q6J("matTooltip",i.ministryName),t.xp6(1),t.hij(" ",(null==i.organizationsInvolved?null:i.organizationsInvolved.length)>0&&(null==i.organizationsInvolved[0]?null:i.organizationsInvolved[0].organization),""),t.xp6(1),t.Q6J("ngIf",(null==i.organizationsInvolved?null:i.organizationsInvolved.length)>1),t.xp6(5),t.Oqu(i.organizationCreatedBy),t.xp6(8),t.Oqu(i.activitySectorsData),t.xp6(5),t.Oqu(i.ActivityScopeData),t.xp6(11),t.Oqu(i.activityReportedBy),t.xp6(2),t.Oqu(t.xi3(90,64,null==i.activityData?null:i.activityData.createdAt,"medium")),t.xp6(2),t.Q6J("innerHTML",null==i.activityData?null:i.activityData.description,t.oJD),t.xp6(2),t.Q6J("ngIf",(null==i.activityData||null==i.activityData.attachments?null:i.activityData.attachments.length)>=1),t.xp6(2),t.Q6J("ngForOf",null==i.activityData?null:i.activityData.attachments),t.xp6(1),t.Q6J("ngForOf",i.activityLogData),t.xp6(2),t.Q6J("formGroup",i.activityLogForm),t.xp6(5),t.Q6J("value",i.description),t.xp6(7),t.Q6J("value",i.status[0]),t.xp6(2),t.Q6J("value",i.status[1]),t.xp6(2),t.Q6J("value",i.status[4]),t.xp6(2),t.Q6J("value",i.status[2]),t.xp6(7),t.Q6J("value",i.Priority[0]),t.xp6(2),t.Q6J("value",i.Priority[1]),t.xp6(2),t.Q6J("value",i.Priority[2]),t.xp6(2),t.Q6J("value",i.Priority[3]),t.xp6(7),t.Q6J("value",i.visibility[0]),t.xp6(2),t.Q6J("value",i.visibility[1]),t.xp6(8),t.Q6J("ngForOf",i.organizationList),t.xp6(5),t.Q6J("value",i.isFilesListArray),t.xp6(4),t.Q6J("disabled",""===i.description),t.xp6(3),t.Q6J("ngIf",!i.isArchive),t.xp6(1),t.Q6J("ngIf",i.isArchive),t.xp6(13),t.hij("",i.selectedActivityAssignedTo," "),t.xp6(7),t.Oqu(null!=i.activityData&&i.activityData.dueDate?t.xi3(180,67,null==i.activityData?null:i.activityData.dueDate,"medium"):"No DueDate"),t.xp6(3),t.Q6J("matMenuTriggerFor",c),t.xp6(3),t.Q6J("matMenuTriggerFor",n),t.xp6(5),t.Q6J("ngForOf",null==i.activityData||null==i.activityData.dueDateLog?null:i.activityData.dueDateLog.reverse()),t.xp6(15),t.Q6J("matDatepicker",s)("min",i.minDate),t.xp6(1),t.Q6J("for",s),t.xp6(7),t.hij(" ",0===(null==i.activityData||null==i.activityData.attachments?null:i.activityData.attachments.length)?"No Files in this Activity":"Files in this Activity"," "),t.xp6(1),t.Q6J("ngForOf",null==i.activityData?null:i.activityData.attachments),t.xp6(11),t.hij(" ",t.xi3(226,70,null==i.activityData?null:i.activityData.createdAt,"medium")," "),t.xp6(2),t.Q6J("ngForOf",i.ActivityTimeLogs),t.xp6(8),t.Q6J("ngForOf",null==i.activityData?null:i.activityData.createdByOrganizationData),t.xp6(1),t.Q6J("ngForOf",i.organizationsInvolved)}},dependencies:[u.sg,u.O5,p._Y,p.JJ,p.JL,p.sg,p.u,O.ey,E.lW,h.Mq,h.hl,h.nW,N.Hw,f.KE,f.hX,Y.Nt,C.VK,C.OP,C.p6,q.VQ,q.U0,L.gD,B.gM,H,$,u.JJ,u.rS,u.uU],styles:[".btn-back[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px;letter-spacing:.03em;margin-bottom:5px}.mat-Icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.padding[_ngcontent-%COMP%]{min-width:30px;padding:0;border-radius:5px}.img-span[_ngcontent-%COMP%]{height:50px;width:50px;background-color:#bbb;border-radius:50%;text-align:center}.mat-i[_ngcontent-%COMP%]{font-size:40px;opacity:.5;width:40px;height:40px;line-height:40px}.kit[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{opacity:.7}hr[_ngcontent-%COMP%]{opacity:.1}.date-icon[_ngcontent-%COMP%]{min-width:30px;padding:0}.redText[_ngcontent-%COMP%]{color:#b54b4b}.blueText[_ngcontent-%COMP%]{color:#7979c4}  .NgxEditor{height:200px;overflow-y:auto}  .NgxEditor__Content{min-height:150px}"]}),a})();var St=l(5017),g=l(3626),V=l(8739),Ft=l(8202),kt=l(5150),Nt=l(6749),qt=l(1135),It=l(4336),Ut=l(4889),Mt=l(1413),Ot=l(9974),Et=l(3546),Jt=l(6709),Z=l(7331),J=l(3848);function wt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("activityTypesData",n,"types",!0))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.shortName," ")}}function Rt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,wt,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function Pt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("activityEntryTypesData",n,"entryTypes",!0))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function zt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Pt,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function Qt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("activitySectorsData",n,"geography",!0))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Yt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Qt,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function Lt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("activityScopesData",n,"scope",!0))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function Bt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Lt,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function Ht(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("priority",n,"priority",!1))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function $t(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Ht,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function Vt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().index,c=t.oxw();return t.KtG(c.removeFilter("status",n,"status",!1))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function Gt(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Vt,5,1,"mat-chip",4),t.BQk()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngIf",!0===e.selected)}}function jt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.removeDateFilter("createdDate"))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.createdDateChipValue," ")}}function Kt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip"),t._uU(1),t.TgZ(2,"button",58)(3,"mat-icon",22),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.removeDateFilter("dueDate"))}),t._uU(4,"cancel"),t.qZA()()()}if(2&a){const e=t.oxw();t.xp6(1),t.hij(" ",e.dueDateChipValue," ")}}function Wt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",59),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.resetAllFilters())}),t._uU(1,"Reset Filters"),t.qZA()}}function Xt(a,o){if(1&a&&(t.TgZ(0,"mat-option"),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function te(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-option",22),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.sortActivityListData(c))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function ee(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-radio-button",60),t.NdJ("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.filterActivityListData("createdDate",n,s.DisplayName))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.DisplayName," ")}}function ie(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid start date"),t.qZA())}function ae(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid end date"),t.qZA())}const G=function(){return{width:"180px"}};function ne(a,o){if(1&a&&(t.TgZ(0,"mat-form-field",61),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"mat-label"),t._uU(2,"Enter date"),t.qZA(),t.TgZ(3,"mat-date-range-input",62),t._UZ(4,"input",63)(5,"input",64),t.qZA(),t._UZ(6,"mat-datepicker-toggle",65)(7,"mat-date-range-picker",null,66),t.YNc(9,ie,2,0,"mat-error",4),t.YNc(10,ae,2,0,"mat-error",4),t.qZA()),2&a){const e=t.MAs(8),i=t.oxw();t.Q6J("ngStyle",t.DdM(6,G)),t.xp6(3),t.Q6J("formGroup",i.customCreatedDate)("rangePicker",e),t.xp6(3),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.customCreatedDate.controls.fromDate.hasError("matStartDateInvalid")),t.xp6(1),t.Q6J("ngIf",i.customCreatedDate.controls.toDate.hasError("matEndDateInvalid"))}}function oe(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-radio-button",60),t.NdJ("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.filterActivityListData("dueDate",n,s.DisplayName))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("value",e.key),t.xp6(1),t.hij(" ",e.DisplayName," ")}}function ce(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid start date"),t.qZA())}function se(a,o){1&a&&(t.TgZ(0,"mat-error"),t._uU(1,"Invalid end date"),t.qZA())}function re(a,o){if(1&a&&(t.TgZ(0,"mat-form-field",61),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"mat-label"),t._uU(2,"Enter date"),t.qZA(),t.TgZ(3,"mat-date-range-input",62),t._UZ(4,"input",63)(5,"input",64),t.qZA(),t._UZ(6,"mat-datepicker-toggle",65)(7,"mat-date-range-picker",null,67),t.YNc(9,ce,2,0,"mat-error",4),t.YNc(10,se,2,0,"mat-error",4),t.qZA()),2&a){const e=t.MAs(8),i=t.oxw();t.Q6J("ngStyle",t.DdM(6,G)),t.xp6(3),t.Q6J("formGroup",i.customDueDate)("rangePicker",e),t.xp6(3),t.Q6J("for",e),t.xp6(3),t.Q6J("ngIf",i.customDueDate.controls.fromDate.hasError("matStartDateInvalid")),t.xp6(1),t.Q6J("ngIf",i.customDueDate.controls.toDate.hasError("matEndDateInvalid"))}}function le(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"status",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.DisplayName," ")}}function pe(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"types",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.name," ")}}function ue(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"entryTypes",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.name," ")}}function de(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"geography",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.name," ")}}function me(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"scope",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.name," ")}}function _e(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-checkbox",68),t.NdJ("ngModelChange",function(n){const s=t.CHM(e).$implicit;return t.KtG(s.selected=n)})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(r.activityListFilterOnChanged(n,"priority",s))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.Q6J("ngModel",e.selected),t.xp6(1),t.hij(" ",e.DisplayName," ")}}function ge(a,o){if(1&a&&(t.TgZ(0,"div",22),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",25)(2,"mat-checkbox",69),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function ye(a,o){if(1&a&&(t.TgZ(0,"div",22),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",25)(2,"mat-checkbox",69),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function ve(a,o){if(1&a&&(t.TgZ(0,"div",70)(1,"mat-icon"),t._uU(2,"assignment"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" All Tasks ( ",null!=e.activitiesTabCount&&null!=e.activitiesTabCount.all[0]&&e.activitiesTabCount.all[0].all?null==e.activitiesTabCount.all[0]?null:e.activitiesTabCount.all[0].all:0," ) ")}}function he(a,o){if(1&a&&(t.TgZ(0,"div",70)(1,"mat-icon"),t._uU(2,"assignment_ind"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" My Tasks ( ",null!=e.activitiesTabCount&&null!=e.activitiesTabCount.myTasks[0]&&e.activitiesTabCount.myTasks[0].myTasks?null==e.activitiesTabCount.myTasks[0]?null:e.activitiesTabCount.myTasks[0].myTasks:0," ) ")}}function fe(a,o){if(1&a&&(t.TgZ(0,"div",70)(1,"mat-icon"),t._uU(2,"hourglass_empty"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.hij(" Overdue ( ",null!=e.activitiesTabCount&&null!=e.activitiesTabCount.overDue[0]&&e.activitiesTabCount.overDue[0].overDue?null==e.activitiesTabCount.overDue[0]?null:e.activitiesTabCount.overDue[0].overDue:0," ) ")}}function Ae(a,o){if(1&a&&(t.TgZ(0,"div",70)(1,"mat-icon"),t._uU(2,"wb_incandescent"),t.qZA(),t._uU(3),t.qZA()),2&a){const e=t.oxw(2);t.xp6(3),t.hij(" High Priority ( ",null!=e.activitiesTabCount&&null!=e.activitiesTabCount.highPriority[0]&&e.activitiesTabCount.highPriority[0].highPriority?null==e.activitiesTabCount.highPriority[0]?null:e.activitiesTabCount.highPriority[0].highPriority:0," ) ")}}function Te(a,o){1&a&&(t.TgZ(0,"div")(1,"mat-tab",71),t.YNc(2,Ae,4,1,"ng-template",38),t.qZA()())}function De(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"th",72)(1,"mat-checkbox",73),t.NdJ("change",function(n){t.CHM(e);const c=t.oxw();return t.KtG(n?c.toggleAllRows():null)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Ce(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",74)(1,"mat-checkbox",75),t.NdJ("click",function(n){return n.stopPropagation()})("change",function(n){const s=t.CHM(e).$implicit,r=t.oxw();return t.KtG(n?r.selection.toggle(s):null)}),t.qZA(),t.TgZ(2,"button",76),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.generateActivityRowActions(c.status,c))}),t.TgZ(3,"mat-icon"),t._uU(4,"arrow_drop_down"),t.qZA()()()}if(2&a){const e=o.$implicit,i=t.oxw(),n=t.MAs(154);t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))("aria-label",i.checkboxLabel(e)),t.xp6(1),t.Q6J("matMenuTriggerFor",n)}}function Ze(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Status "),t.qZA())}const be=function(a,o,e,i){return{"badge-not-admissible":a,"badge-resolved":o,"badge-in-progress":e,"badge-new":i}};function xe(a,o){if(1&a&&(t.TgZ(0,"td",77)(1,"span",78),t._uU(2),t.ALo(3,"titlecase"),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.Q6J("ngClass",t.l5B(4,be,"rejected"===(null==e?null:e.status.toLowerCase()),"resolved"===(null==e?null:e.status.toLowerCase()),"inprogress"===(null==e?null:e.status.toLowerCase()),"new"===(null==e?null:e.status.toLowerCase()))),t.xp6(1),t.Oqu(t.lcZ(3,2,null==e?null:e.status))}}function Se(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Activity "),t.qZA())}function Fe(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",79),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.navigateToActivityDetails(c._id))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.uniqIdentity," ")}}function ke(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Title "),t.qZA())}function Ne(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",79),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.navigateToActivityDetails(c._id))}),t._uU(1),t.qZA()}if(2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function qe(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Priority "),t.qZA())}function Ie(a,o){if(1&a&&(t.TgZ(0,"td",74),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e?null:e.priority," ")}}function Ue(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Due date "),t.qZA())}function Me(a,o){if(1&a&&(t.TgZ(0,"td",74),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,null==e?null:e.dueDate,"MMM d, y")," ")}}function Oe(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Assignto "),t.qZA())}function Ee(a,o){if(1&a&&(t.TgZ(0,"td",74),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",null==e||null==e.assignTo[0]?null:e.assignTo[0].organization," ")}}function Je(a,o){1&a&&(t.TgZ(0,"th",72),t._uU(1," Action "),t.qZA())}function we(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",74)(1,"mat-icon",80),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.navigateToActivityDetails(c._id))}),t._uU(2,"keyboard_arrow_right icon"),t.qZA()()}}function Re(a,o){1&a&&t._UZ(0,"tr",81)}function Pe(a,o){1&a&&t._UZ(0,"tr",82)}function ze(a,o){1&a&&(t.TgZ(0,"div")(1,"mat-card",83),t._uU(2," No Activities found "),t.qZA()())}function Qe(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onActivityRowActionClick(c.action))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(2),t.Oqu(e.icon),t.xp6(2),t.Oqu(e.title)}}function Ye(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Qe,5,2,"button",84),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.activityRowActionByStatus)}}function Le(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"button",85),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.onActivityRowActionClick(c.action))}),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.TgZ(3,"span"),t._uU(4),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(2),t.Oqu(e.icon),t.xp6(2),t.Oqu(e.title)}}function Be(a,o){if(1&a&&(t.ynx(0),t.YNc(1,Le,5,2,"button",84),t.BQk()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.userActivityRowActionByStatus)}}let He=(()=>{class a{constructor(e,i,n,c,s,r,d,m,y,b,x){this.activityService=e,this.storageService=i,this.router=n,this.userDetailsService=c,this.alertpopupService=s,this.confirmationDialogService=r,this.breadcrumbService=d,this.csvHelperService=m,this.selectedOrganizationService=y,this.dashboardService=b,this.searchTriggerService=x,this.displayedColumns=["select","Status","Activity","Title","Priority","Duedate","Assignto","actions"],this.activityFiltersData=Nt.C,this.currentStatus=v,this.superAdminActivityRowActions=W,this.userActivityRowActions=X,this.statusEnums=v,this.activitylist=[],this.filter=Ft.t,this.paginationProps=kt.k,this.isSuperAdmin=!1,this.isShowCustomCreatedDate=!1,this.isShowCustomDueDate=!1,this.allCompleteFilters={type:!1,status:!1,entryType:!1,scope:!1,priority:!1,sectors:!1},this.totalActivitiesCount=0,this.selection=new St.Ov(!0,[]),this.filters={types:[],status:[],entryTypes:[],scope:[],priority:[],geography:[]},this.customCreatedDate=new p.cw({fromDate:new p.NI(null),toDate:new p.NI(null)}),this.customDueDate=new p.cw({fromDate:new p.NI(null),toDate:new p.NI(null)}),this.createdDate=new p.NI,this.dueDte=new p.NI,this.createdDateChipValue="",this.dueDateChipValue="",this.isResetFilters=!1,this.activitySearchCriteriaPayload=new qt.X({pageNumber:0,pageSize:this.paginationProps.pageSize,sortField:"",sortOrder:1,isArchive:!1,onlyMyTasks:!1}),this.isSuperAdmin=this.storageService.getDataFromLocalStorage(D.I.ROLE)===R.G.SuperAdmin}ngOnInit(){this.appliedFilters=this.storageService.getDataFromLocalStorage(D.I.ACTIVITY_FILTERS)&&JSON.parse(this.storageService.getDataFromLocalStorage(D.I.ACTIVITY_FILTERS)),this.appliedFilters&&(this.appliedFilters?.createdDate&&this.setCreatedDateFilter(),this.appliedFilters?.dueDate&&this.setDueDateFilter(),this.filters={types:this.appliedFilters.types?this.appliedFilters.types:[],status:this.appliedFilters.status?this.appliedFilters.status:[],entryTypes:this.appliedFilters.entryTypes?this.appliedFilters.entryTypes:[],scope:this.appliedFilters.scope?this.appliedFilters.scope:[],priority:this.appliedFilters.priority?this.appliedFilters.priority:[],geography:this.appliedFilters.geography?this.appliedFilters.geography:[]},0!==this.appliedFilters?.status?.length&&this.activityFiltersData.status.forEach(e=>{e.selected=!!this.appliedFilters?.status?.includes(e.key)}),0!==this.appliedFilters?.priority?.length&&this.activityFiltersData.priority.forEach(e=>{e.selected=!!this.appliedFilters?.priority?.includes(e.key)}),this.activitySearchCriteriaPayload.next(this.appliedFilters)),this.getAcivityMasterData(),this.selectedOrganizationService.getSelectedOrganization().subscribe(e=>{this.selectedOrganizationIds=e,this.getActivitiesSearchCriteria(),this.getTabBasedActivityCount()}),this.getLogedinUserDetails(),this.customCreatedDate.valueChanges.subscribe(e=>{if(null!==e.fromDate&&null!==e.toDate){let i;this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),this.activitySearchCriteriaPayload.next({...i,createdDate:{fromDate:e.fromDate?.toISOString(),toDate:e.toDate?.toISOString()}}),this.createdDateChipValue=`${e.fromDate?.toDateString()} - ${e.toDate?.toDateString()}`}}),this.customDueDate.valueChanges.subscribe(e=>{if(null!==e.fromDate&&null!==e.toDate){let i;this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),this.activitySearchCriteriaPayload.next({...i,dueDate:{fromDate:e.fromDate?.toISOString(),toDate:e.toDate?.toISOString()}}),this.dueDateChipValue=`${e.fromDate?.toDateString()} - ${e.toDate?.toDateString()}`}}),this.breadcrumbService.getSelectedActivitiesStatus().subscribe(e=>{e&&e.key&&(this.filters.status=[],this.activityFiltersData.status.map(i=>{i.selected=!1}),e.selected=!0,this.activityListFilterOnChanged({},"status",e))}),this.activitySearchCriteriaPayload.subscribe(e=>{this.getActivitiesSearchCriteria()}),this.searchTriggerService.getSearchData().subscribe(e=>{let i;this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),this.activitySearchCriteriaPayload.next({...i,searchTerm:e})})}setCreatedDateFilter(){let e=this.activityFiltersData.createddate.findIndex(i=>i.key.unit==this.appliedFilters.createdDate.unit);e>0?this.filterActivityListData("createdDate",{source:{value:this.activityFiltersData.createddate[e].key}},this.activityFiltersData.createddate[e].DisplayName):(this.appliedFilters.createdDate.fromDate||this.appliedFilters.createdDate.todate)&&(this.customCreatedDate.controls.fromDate.setValue(this.appliedFilters.createdDate.fromDate),this.customCreatedDate.controls.toDate.setValue(this.appliedFilters.createdDate?.toDate),this.isShowCustomCreatedDate=!0,this.createdDateChipValue=`${this.appliedFilters.createdDate.fromDate} - ${this.appliedFilters.createdDate.toDate}`)}setDueDateFilter(){let e=this.activityFiltersData.duedate.findIndex(i=>i.key==this.appliedFilters.dueDate.customString);e>0?this.filterActivityListData("dueDate",{source:{value:this.activityFiltersData.duedate[e].key}},this.activityFiltersData.duedate[e].DisplayName):(this.appliedFilters.dueDate.fromDate||this.appliedFilters.dueDate.todate)&&(this.customDueDate.controls.fromDate.setValue(this.appliedFilters.dueDate.fromDate),this.customCreatedDate.controls.toDate.setValue(this.appliedFilters.dueDate?.toDate),this.isShowCustomDueDate=!0,this.dueDateChipValue=`${this.appliedFilters.dueDate.fromDate} - ${this.appliedFilters.dueDate.toDate}`)}getActivitiesSearchCriteria(){let e;this.activitySearchCriteriaPayload.subscribe(n=>{this.storageService.setDataToLocalStorage(D.I.ACTIVITY_FILTERS,JSON.stringify(n)),e=n}),this.isResetFilters=!!(!Object.values(this.filters).every(n=>0===n.length)||e.createdDate&&""!==e.createdDate||e.dueDate&&""!==e.dueDate),e={...e,organizations:this.selectedOrganizationIds},this.activityService.getActivitiesSearchCriteria(e).subscribe(n=>{this.totalActivitiesCount=n.data[0]?.count[0]?.count?n.data[0]?.count[0]?.count:0,this.dataSource=new g.by(n.data[0].activities),this.activityStatusMetricsCount()})}getLogedinUserDetails(){this.userDetailsService.getUserDetails().subscribe(e=>{this.logedInUserDetails=e})}downloadFile(){let e=0===this.selection.selected.length?this.dataSource.filteredData:this.selection.selected,i=[];for(let c=0;c<e.length;c++){const s={title:e[c].title,description:e[c].description.replace(/<[^>]*>/g,""),status:e[c].status,priority:e[c].priority,assignedTo:e[c].assignTo[0].organization,dueDate:e[c].dueDate,createdDate:e[c].createdAt};i.push(s)}this.csvHelperService.downloadFile(i,"List of Activities",tt)}isAllSelected(){const i=this.dataSource?.data.length;return this.selection.selected.length===i}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}ngAfterViewInit(){this.dataSource&&(this.dataSource.paginator=this.paginator)}onChangedPageSize(e){let i;this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),this.activitySearchCriteriaPayload.next({...i,pageNumber:e.pageIndex,pageSize:e.pageSize})}getAcivityMasterData(){this.activityService.getActivityMastarData().subscribe(e=>{e.data&&(this.masterData=e.data,this.masterData?.activityTypesData.forEach(i=>{i.selected=!(0===this.appliedFilters?.types?.length||!this.appliedFilters?.types||!this.appliedFilters.types.includes(i._id))}),this.masterData?.activityEntryTypesData.forEach(i=>{i.selected=!(0===this.appliedFilters?.entryType?.length||!this.appliedFilters?.entryType||!this.appliedFilters.entryType.includes(i._id))}),this.masterData?.activitySectorsData.forEach(i=>{i.selected=!(0===this.appliedFilters?.sectors?.length||!this.appliedFilters?.sectors||!this.appliedFilters.sectors.includes(i._id))}),this.masterData?.activityScopesData.forEach(i=>{i.selected=!(0===this.appliedFilters?.scope?.length||!this.appliedFilters?.scope||!this.appliedFilters.scope.includes(i._id))}))})}navigateToActivityDetails(e){this.router.navigate([T.p.ACTIVITY_DETAILS],{queryParams:{aId:e}})}generateActivityRowActions(e,i){this.selectedActivtyForRowActions=i,this.activityRowActionByStatus=this.superAdminActivityRowActions[e],this.userActivityRowActionByStatus=this.userActivityRowActions.filter(n=>n.displayCondition(i,this.logedInUserDetails))}onActivityRowActionClick(e){switch(e){case"NEW":case"INPROGRESS":case"RESOLVED":case"REJECTED":this.updateActivityStatus(e);break;case"REPLY":this.moveToActivityDetail();break;case"ARCHIVE":this.updateArchivestatus();break;case"DELETE":this.deleteActivityByActivityId();break;case"EDIT":this.editActivityByActivityId();break;case"MOVE_TO_ORGANIZATION":this.activityService.openMoveToOrganizationPopup(this.selectedActivtyForRowActions._id).afterClosed().subscribe(i=>{i&&this.getActivitiesSearchCriteria()})}}updateActivityStatus(e){this.confirmationDialogService.open({message:`Are you sure to change activity ${this.selectedActivtyForRowActions.uniqIdentity} to ${e}`}).afterClosed().subscribe(i=>{i&&this.activityService.updateActivityStatus(this.selectedActivtyForRowActions._id,{status:e}).subscribe(n=>{this.alertpopupService.open({message:"Activity Status Updated Successfully",action:"ok"}),this.getActivitiesSearchCriteria()})},i=>{this.alertpopupService.open({message:i.message?i.message:"Unable to update Activity status",action:"ok"})})}updateArchivestatus(){this.confirmationDialogService.open({message:`Are you sure to Archive the activity ${this.selectedActivtyForRowActions.uniqIdentity}`}).afterClosed().subscribe(e=>{e&&this.activityService.updateArchivestatus(this.selectedActivtyForRowActions._id,{isArchive:!0}).subscribe(i=>{this.alertpopupService.open({message:"Activity Archived Successfully",action:"ok"}),this.getActivitiesSearchCriteria()})},e=>{this.alertpopupService.open({message:e.message?e.message:"Unable to archive Activity status",action:"ok"})})}deleteActivityByActivityId(){this.confirmationDialogService.open({message:`Are you sure to Delete activity ${this.selectedActivtyForRowActions.uniqIdentity}`}).afterClosed().subscribe(e=>{e&&this.activityService.deleteSelectedActivity(this.selectedActivtyForRowActions._id).subscribe(i=>{this.alertpopupService.open({message:"Activity Deleted Successfully",action:"ok"}),this.getActivitiesSearchCriteria()})},e=>{this.alertpopupService.open({message:e.message?e.message:"Unable to delete Activity status",action:"ok"})})}editActivityByActivityId(){this.router.navigate([T.p.CREATEACTIVITY],{queryParams:{aId:this.selectedActivtyForRowActions._id}})}moveToActivityDetail(){this.router.navigate([T.p.ACTIVITY_DETAILS],{queryParams:{aId:this.selectedActivtyForRowActions._id}})}filterActivityListData(e,i,n){let c;switch(this.activitySearchCriteriaPayload.subscribe(s=>{c=s}),e){case"createdDate":const s=i?.source?.value;"R"===s?.unit?this.isShowCustomCreatedDate=!0:"ALL"===s?(this.activitySearchCriteriaPayload.next({...c,createdDate:""}),this.isShowCustomCreatedDate=!1,this.customCreatedDate.reset(),this.createdDateChipValue=""):(this.activitySearchCriteriaPayload.next({...c,createdDate:s}),this.isShowCustomCreatedDate=!1,this.customCreatedDate.reset(),this.createdDateChipValue=n);break;case"dueDate":const r=i?.source?.value;"R"===r?this.isShowCustomDueDate=!0:"ALL"===r?(this.activitySearchCriteriaPayload.next({...c,dueDate:""}),this.isShowCustomDueDate=!1,this.customDueDate.reset(),this.dueDateChipValue=""):(this.activitySearchCriteriaPayload.next({...c,dueDate:{customString:r}}),this.isShowCustomDueDate=!1,this.customDueDate.reset(),this.dueDateChipValue=n)}}activityListFilterOnChanged(e,i,n){if(n.selected)this.filters[i].push(n._id?n._id:n.key);else if(n._id){let s=this.filters[i].findIndex(r=>r===n._id);this.filters[i].splice(s,1)}else{let s=this.filters[i].findIndex(r=>r===n.key);this.filters[i].splice(s,1)}let c;this.activitySearchCriteriaPayload.subscribe(s=>{c=s}),this.activitySearchCriteriaPayload.next({...c,...this.filters})}setAllFiltersToggle(e,i,n){!this.masterData[n]||this.masterData[n].forEach(c=>{c.selected=e})}removeFilter(e,i,n,c){let s;c?(this.masterData[e][i].selected=!1,s=this.masterData[e][i]._id):(this.activityFiltersData[e][i].selected=!1,s=this.activityFiltersData[e][i].key);let d,r=this.filters[n].findIndex(m=>m===s);this.filters[n].splice(r,1),this.activitySearchCriteriaPayload.subscribe(m=>{d=m}),this.activitySearchCriteriaPayload.next({...d,...this.filters})}removeDateFilter(e){let i;switch(this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),e){case"createdDate":this.activitySearchCriteriaPayload.next({...i,createdDate:""}),this.createdDateChipValue="";break;case"dueDate":this.activitySearchCriteriaPayload.next({...i,dueDate:""}),this.dueDateChipValue=""}}sortActivityListData(e){let i;this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),this.activitySearchCriteriaPayload.next({...i,sortField:e.key})}onActivityTabSelection(e){let i;switch(this.activitySearchCriteriaPayload.subscribe(n=>{i=n}),e.tab.textLabel){case"ALL":this.activitySearchCriteriaPayload.next({...i,priority:[],dueDate:void 0,onlyMyTasks:!1});break;case"MY_TASKS":this.activitySearchCriteriaPayload.next({...i,priority:[],dueDate:void 0,onlyMyTasks:!0,organizations:this.selectedOrganizationIds});break;case"OVERDUE":this.activitySearchCriteriaPayload.next({...i,priority:[],dueDate:{customString:"OVERDUE"},onlyMyTasks:!1});break;case"HIGH":this.activitySearchCriteriaPayload.next({...i,priority:["HIGH"],dueDate:void 0,onlyMyTasks:!1})}}resetAllFilters(){this.activityFiltersData.status.forEach(e=>{e.selected=!1}),this.activityFiltersData.priority.forEach(e=>{e.selected=!1}),this.masterData?.activityTypesData.forEach(e=>{e.selected=!1}),this.masterData?.activityEntryTypesData.forEach(e=>{e.selected=!1}),this.masterData?.activitySectorsData.forEach(e=>{e.selected=!1}),this.masterData?.activityScopesData.forEach(e=>{e.selected=!1}),this.filters={types:[],status:[],entryTypes:[],scope:[],priority:[],geography:[]},this.activitySearchCriteriaPayload.next({pageNumber:0,pageSize:this.paginationProps.pageSize,sortField:"",sortOrder:1,isArchive:!1,onlyMyTasks:!1}),this.createdDateChipValue="",this.dueDateChipValue=""}getTabBasedActivityCount(){this.activityService.getActivitiesCountForHeaders({organizations:this.selectedOrganizationIds}).subscribe(i=>{this.activitiesTabCount=i.data[0]})}activityStatusMetricsCount(){this.dashboardService.postDashBoardActivityMetrics({organizations:this.selectedOrganizationIds}).subscribe(i=>{this.activityFiltersData.status[0]={...this.activityFiltersData.status[0],count:i.data[0]?.new[0]?.newCount},this.activityFiltersData.status[1]={...this.activityFiltersData.status[1],count:i.data[0]?.inProgress[0]?.inProgressCount},this.activityFiltersData.status[2]={...this.activityFiltersData.status[2],count:i.data[0]?.resolved[0]?.resolvedCount},this.activityFiltersData.status[3]={...this.activityFiltersData.status[3],count:i.data[0]?.rejectedCount[0]?.rejectedCount}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(I.M),t.Y36(U.V),t.Y36(A.F0),t.Y36(M.H),t.Y36(k.z),t.Y36(z.O),t.Y36(It.p),t.Y36(Q),t.Y36(Ut.s),t.Y36(Mt.s),t.Y36(Ot.V))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity"]],viewQuery:function(e,i){if(1&e&&t.Gf(V.NW,5),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first)}},decls:157,vars:45,consts:[[1,"d-flex","justify-content-between","mb-2"],["aria-label","Fruit selection"],["chipList",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"text-end","activity_actions"],["mat-button","","class","resetButton",3,"click",4,"ngIf"],["mat-button","","matTooltip","Download",1,"",3,"click"],[1,"icon-taskdownl"],[1,"download"],["mat-button","","matTooltip","Filters",3,"matMenuTriggerFor"],["filters","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["groupBymenu","matMenu"],["mat-button","","matTooltip","Sort By",3,"matMenuTriggerFor"],["sortby","matMenu"],[3,"click",4,"ngFor","ngForOf"],["createddate","matMenu"],["aria-labelledby","example-radio-group-label",1,"example-radio-group",3,"click"],["class","example-radio-button",3,"value","change",4,"ngFor","ngForOf"],["appearance","fill",3,"ngStyle","click",4,"ngIf"],["duedate","matMenu"],[3,"click"],["aria-labelledby","example-radio-group-label",1,"example-radio-group"],["status","matMenu"],[1,"example-section"],[1,"example-list-section"],["class","example-margin",3,"ngModel","ngModelChange","change",4,"ngFor","ngForOf"],["types","matMenu"],[1,"example-margin",3,"checked","change"],["entrytype","matMenu"],["geography","matMenu"],["scope","matMenu"],["priority","matMenu"],["createdby","matMenu"],["assignto","matMenu"],[1,"activities-list",3,"selectedTabChange"],["label","ALL"],["mat-tab-label",""],["label","MY_TASKS"],["label","OVERDUE"],["mat-table","",1,"mat-elevation-z8","userTable",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Status"],["mat-cell","","class","status-badge",4,"matCellDef"],["matColumnDef","Activity"],["mat-cell","","class","cursor",3,"click",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Priority"],["matColumnDef","Duedate"],["matColumnDef","Assignto"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of GitHub search results",3,"length","pageSize","pageSizeOptions","page"],["menu","matMenu"],["matChipRemove",""],["mat-button","",1,"resetButton",3,"click"],[1,"example-radio-button",3,"value","change"],["appearance","fill",3,"ngStyle","click"],[3,"formGroup","rangePicker"],["matStartDate","","formControlName","fromDate","placeholder","Start date"],["matEndDate","","formControlName","toDate","placeholder","End date"],["matSuffix","",3,"for"],["picker",""],["picker1",""],[1,"example-margin",3,"ngModel","ngModelChange","change"],[1,"example-margin"],[1,"d-flex","align-items-center","gap-1"],["label","HIGH"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor","click"],["mat-cell","",1,"status-badge"],[1,"badge",3,"ngClass"],["mat-cell","",1,"cursor",3,"click"],[1,"cursor",3,"click"],["mat-header-row",""],["mat-row",""],[1,"noActivities-message"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div")(1,"div",0)(2,"div")(3,"mat-chip-list",1,2),t.YNc(5,Rt,2,1,"ng-container",3),t.YNc(6,zt,2,1,"ng-container",3),t.YNc(7,Yt,2,1,"ng-container",3),t.YNc(8,Bt,2,1,"ng-container",3),t.YNc(9,$t,2,1,"ng-container",3),t.YNc(10,Gt,2,1,"ng-container",3),t.ynx(11),t.YNc(12,jt,5,1,"mat-chip",4),t.BQk(),t.ynx(13),t.YNc(14,Kt,5,1,"mat-chip",4),t.BQk(),t.qZA()(),t.TgZ(15,"div",5),t.YNc(16,Wt,2,0,"button",6),t.TgZ(17,"button",7),t.NdJ("click",function(){return i.downloadFile()}),t._UZ(18,"i",8),t.TgZ(19,"mat-icon",9),t._uU(20,"file_download"),t.qZA()(),t.TgZ(21,"button",10)(22,"mat-icon"),t._uU(23," filter_alt"),t.qZA(),t._uU(24,"Filters "),t.TgZ(25,"mat-icon"),t._uU(26,"keyboard_arrow_down"),t.qZA()(),t.TgZ(27,"mat-menu",null,11)(29,"button",12),t._uU(30,"Created Date"),t.qZA(),t.TgZ(31,"button",12),t._uU(32,"Due Date"),t.qZA(),t.TgZ(33,"button",12),t._uU(34,"Status"),t.qZA(),t.TgZ(35,"button",12),t._uU(36,"Types"),t.qZA(),t.TgZ(37,"button",12),t._uU(38,"Entry Type"),t.qZA(),t.TgZ(39,"button",12),t._uU(40,"Geography"),t.qZA(),t.TgZ(41,"button",12),t._uU(42,"Scope"),t.qZA(),t.TgZ(43,"button",12),t._uU(44,"Priority"),t.qZA()(),t.TgZ(45,"mat-menu",null,13),t.YNc(47,Xt,2,1,"mat-option",3),t.qZA(),t.TgZ(48,"button",14)(49,"mat-icon"),t._uU(50,"sort"),t.qZA(),t._uU(51," Sort By "),t.TgZ(52,"mat-icon"),t._uU(53,"keyboard_arrow_down"),t.qZA()(),t.TgZ(54,"mat-menu",null,15),t.YNc(56,te,2,1,"mat-option",16),t.qZA()()(),t.TgZ(57,"mat-menu",null,17)(59,"mat-radio-group",18),t.NdJ("click",function(c){return c.stopPropagation()}),t.YNc(60,ee,2,2,"mat-radio-button",19),t.qZA(),t.YNc(61,ne,11,7,"mat-form-field",20),t.qZA(),t.TgZ(62,"mat-menu",null,21)(64,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(65,"mat-radio-group",23),t.YNc(66,oe,2,2,"mat-radio-button",19),t.qZA(),t.YNc(67,re,11,7,"mat-form-field",20),t.qZA()(),t.TgZ(68,"mat-menu",null,24)(70,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(71,"section",25)(72,"span",26),t.YNc(73,le,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(74,"mat-menu",null,28)(76,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(77,"section",25)(78,"span",26)(79,"mat-checkbox",29),t.NdJ("change",function(c){return i.setAllFiltersToggle(c.checked,"type","activityTypesData")}),t._uU(80," All "),t.qZA()(),t.TgZ(81,"span",26),t.YNc(82,pe,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(83,"mat-menu",null,30)(85,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(86,"section",25)(87,"span",26)(88,"mat-checkbox",29),t.NdJ("change",function(c){return i.setAllFiltersToggle(c.checked,"entryType","activityEntryTypesData")}),t._uU(89," All "),t.qZA()(),t.TgZ(90,"span",26),t.YNc(91,ue,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(92,"mat-menu",null,31)(94,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(95,"section",25)(96,"span",26),t.YNc(97,de,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(98,"mat-menu",null,32)(100,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(101,"section")(102,"span"),t.YNc(103,me,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(104,"mat-menu",null,33)(106,"div",22),t.NdJ("click",function(c){return c.stopPropagation()}),t.TgZ(107,"section",25)(108,"span",26),t.YNc(109,_e,2,2,"mat-checkbox",27),t.qZA()()()(),t.TgZ(110,"mat-menu",null,34),t.YNc(112,ge,4,1,"div",16),t.qZA(),t.TgZ(113,"mat-menu",null,35),t.YNc(115,ye,4,1,"div",16),t.qZA()(),t.TgZ(116,"mat-tab-group",36),t.NdJ("selectedTabChange",function(c){return i.onActivityTabSelection(c)}),t.TgZ(117,"mat-tab",37),t.YNc(118,ve,4,1,"ng-template",38),t.qZA(),t.TgZ(119,"mat-tab",39),t.YNc(120,he,4,1,"ng-template",38),t.qZA(),t.TgZ(121,"mat-tab",40),t.YNc(122,fe,4,1,"ng-template",38),t.qZA(),t.YNc(123,Te,3,0,"div",4),t.qZA(),t.TgZ(124,"table",41),t.ynx(125,42),t.YNc(126,De,2,3,"th",43),t.YNc(127,Ce,5,3,"td",44),t.BQk(),t.ynx(128,45),t.YNc(129,Ze,2,0,"th",43),t.YNc(130,xe,4,9,"td",46),t.BQk(),t.ynx(131,47),t.YNc(132,Se,2,0,"th",43),t.YNc(133,Fe,2,1,"td",48),t.BQk(),t.ynx(134,49),t.YNc(135,ke,2,0,"th",43),t.YNc(136,Ne,2,1,"td",48),t.BQk(),t.ynx(137,50),t.YNc(138,qe,2,0,"th",43),t.YNc(139,Ie,2,1,"td",44),t.BQk(),t.ynx(140,51),t.YNc(141,Ue,2,0,"th",43),t.YNc(142,Me,3,4,"td",44),t.BQk(),t.ynx(143,52),t.YNc(144,Oe,2,0,"th",43),t.YNc(145,Ee,2,1,"td",44),t.BQk(),t.ynx(146,53),t.YNc(147,Je,2,0,"th",43),t.YNc(148,we,3,0,"td",44),t.BQk(),t.YNc(149,Re,1,0,"tr",54),t.YNc(150,Pe,1,0,"tr",55),t.qZA(),t.YNc(151,ze,3,0,"div",4),t.TgZ(152,"mat-paginator",56),t.NdJ("page",function(c){return i.onChangedPageSize(c)}),t.qZA(),t.TgZ(153,"mat-menu",null,57),t.YNc(155,Ye,2,1,"ng-container",4),t.YNc(156,Be,2,1,"ng-container",4),t.qZA()),2&e){const n=t.MAs(28),c=t.MAs(55),s=t.MAs(58),r=t.MAs(63),d=t.MAs(69),m=t.MAs(75),y=t.MAs(84),b=t.MAs(93),x=t.MAs(99),w=t.MAs(105);t.xp6(5),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityTypesData),t.xp6(1),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityEntryTypesData),t.xp6(1),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activitySectorsData),t.xp6(1),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityScopesData),t.xp6(1),t.Q6J("ngForOf",i.activityFiltersData.priority),t.xp6(1),t.Q6J("ngForOf",i.activityFiltersData.status),t.xp6(2),t.Q6J("ngIf",i.createdDateChipValue&&""!==i.createdDateChipValue),t.xp6(2),t.Q6J("ngIf",i.dueDateChipValue&&""!==i.dueDateChipValue),t.xp6(2),t.Q6J("ngIf",i.isResetFilters),t.xp6(5),t.Q6J("matMenuTriggerFor",n),t.xp6(8),t.Q6J("matMenuTriggerFor",s),t.xp6(2),t.Q6J("matMenuTriggerFor",r),t.xp6(2),t.Q6J("matMenuTriggerFor",d),t.xp6(2),t.Q6J("matMenuTriggerFor",m),t.xp6(2),t.Q6J("matMenuTriggerFor",y),t.xp6(2),t.Q6J("matMenuTriggerFor",b),t.xp6(2),t.Q6J("matMenuTriggerFor",x),t.xp6(2),t.Q6J("matMenuTriggerFor",w),t.xp6(4),t.Q6J("ngForOf",i.activityFiltersData.groupBy),t.xp6(1),t.Q6J("matMenuTriggerFor",c),t.xp6(8),t.Q6J("ngForOf",i.activityFiltersData.sortBy),t.xp6(4),t.Q6J("ngForOf",i.activityFiltersData.createddate),t.xp6(1),t.Q6J("ngIf",i.isShowCustomCreatedDate),t.xp6(5),t.Q6J("ngForOf",i.activityFiltersData.duedate),t.xp6(1),t.Q6J("ngIf",i.isShowCustomDueDate),t.xp6(6),t.Q6J("ngForOf",i.activityFiltersData.status),t.xp6(6),t.Q6J("checked",i.allCompleteFilters.type),t.xp6(3),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityTypesData),t.xp6(6),t.Q6J("checked",i.allCompleteFilters.entryType),t.xp6(3),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityEntryTypesData),t.xp6(6),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activitySectorsData),t.xp6(6),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityScopesData),t.xp6(6),t.Q6J("ngForOf",i.activityFiltersData.priority),t.xp6(3),t.Q6J("ngForOf",i.activityFiltersData.createdby),t.xp6(3),t.Q6J("ngForOf",i.activityFiltersData.assignedto),t.xp6(8),t.Q6J("ngIf",i.isSuperAdmin),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",0===(null==i.dataSource||null==i.dataSource.filteredData?null:i.dataSource.filteredData.length)),t.xp6(1),t.Q6J("length",i.totalActivitiesCount)("pageSize",i.paginationProps.pageSize)("pageSizeOptions",i.paginationProps.pageSizeOptions),t.xp6(3),t.Q6J("ngIf",i.isSuperAdmin),t.xp6(1),t.Q6J("ngIf",!1===i.isSuperAdmin)}},dependencies:[u.mk,u.sg,u.O5,u.PC,p.Fj,p.JJ,p.JL,p.sg,p.u,O.ey,E.lW,Et.a8,Jt.oG,Z.qn,Z.HS,Z.qH,h.nW,h.wx,h.zY,h.By,h._g,N.Hw,f.TO,f.KE,f.hX,f.R9,C.VK,C.OP,C.p6,V.NW,q.VQ,q.U0,g.BZ,g.fO,g.as,g.w1,g.Dz,g.nj,g.ge,g.ev,g.XQ,g.Gk,J.SP,J.uD,J.uX,B.gM,p.On,u.rS,u.uU],styles:["md-select[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:1px solid #666666}.userTable[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid rgb(206,202,202)}.example-margin[_ngcontent-%COMP%]{margin:0 12px;display:block}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.blue-color[_ngcontent-%COMP%]{color:#00f}.status-badge[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]   .badge-resolved[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]   .badge-not-admissible[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]   .badge-in-progress[_ngcontent-%COMP%], .status-badge[_ngcontent-%COMP%]   .badge-new[_ngcontent-%COMP%]{width:100px;color:#fff;text-align:center;padding:5px 9px;letter-spacing:.1em;font-weight:500;font-size:12px;border-radius:0;text-transform:capitalize}.status-badge[_ngcontent-%COMP%]   .badge-new[_ngcontent-%COMP%]{background-color:#ffae3ee0}.status-badge[_ngcontent-%COMP%]   .badge-in-progress[_ngcontent-%COMP%]{background-color:#012970c2}.status-badge[_ngcontent-%COMP%]   .badge-not-admissible[_ngcontent-%COMP%]{background-color:#ff4b3edb}.status-badge[_ngcontent-%COMP%]   .badge-resolved[_ngcontent-%COMP%]{background-color:#4bec81}.cursor[_ngcontent-%COMP%]{cursor:pointer}.noActivities-message[_ngcontent-%COMP%]{text-align:center;color:#e90e0e}"]}),a})();var $e=l(4128);function Ve(a,o){1&a&&(t.TgZ(0,"div",28)(1,"h2",29),t._uU(2," you are not part of any organization so you cannot create activity"),t.qZA()())}function Ge(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.organization)}}function je(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-form-field",10)(2,"mat-label"),t._uU(3,"organizations"),t.qZA(),t.TgZ(4,"mat-select",30),t.YNc(5,Ge,2,2,"mat-option",12),t.qZA()(),t.BQk()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",null==e.userDetails?null:e.userDetails.organizationsdata)}}function Ke(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"h3",32),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw();t.xp6(2),t.hij("organization : ",1===(null==e.userDetails||null==e.userDetails.organizationsdata?null:e.userDetails.organizationsdata.length)?null==e.userDetails||null==e.userDetails.organizationsdata[0]?null:e.userDetails.organizationsdata[0].organization:"No Assigned organization","")}}function We(a,o){1&a&&(t.TgZ(0,"mat-icon",35),t._uU(1,"cancel"),t.qZA())}function Xe(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",33),t.NdJ("removed",function(){const c=t.CHM(e).index,s=t.oxw();return t.KtG(s.removeChip(c))}),t._uU(1),t.YNc(2,We,2,0,"mat-icon",34),t.qZA()}if(2&a){const e=o.$implicit,i=t.oxw();t.Q6J("removable",i.removable),t.xp6(1),t.hij(" ",e.organization," "),t.xp6(1),t.Q6J("ngIf",i.removable)}}function ti(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function ei(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.organization)}}function ii(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function ai(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function ni(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function oi(a,o){if(1&a&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}const ci=[{path:"",component:He},{path:"create",component:(()=>{class a{constructor(e,i,n,c,s,r,d,m){this.organizationService=e,this.formBuilder=i,this.activityService=n,this.alertpopupService=c,this.storageService=s,this.activatedRoute=r,this.userDetailsService=d,this.router=m,this.removable=!0,this.filesListArray=[],this.priority=F,this.status=v,this.activatedRoute.queryParams.subscribe(y=>{this.selectedActivityId=y.aId})}ngOnInit(){this.generateAddNewUserForm(),this.getUserDetails(),this.selectedActivityId?this.forkJoinResult():(this.getAllOrganization(),this.getActivityMasterData())}forkJoinResult(){(0,$e.D)([this.organizations$,this.activityMasterData$,this.activity$]).subscribe(e=>{this.organizationsData=e[0]?.organizations;const i=e[0]?.organizations.filter(n=>e[2].data[0]?.organizationData.find(c=>c._id===n._id));this.activityTypesData=e[1]?.data.activityTypesData,this.activityRelatedTypesData=e[1]?.data?.activityRelatedTypesData,this.activityEntryTypesData=e[1]?.data?.activityEntryTypesData,this.activitySectorsData=e[1]?.data?.activitySectorsData,this.activityScopesData=e[1]?.data?.activityScopesData,this.selectedActivityData=e[2]?.data[0],this.activityForm.controls.activityType.setValue(this.selectedActivityData?.activityType),this.activityForm.controls.activityRelatedTo.setValue(this.selectedActivityData?.activityRelatedTo),this.activityForm.controls.organization?.setValue(i),this.activityForm.controls.activitEntryType.setValue(this.selectedActivityData?.activitEntryType),this.activityForm.controls.activitySector.setValue(this.selectedActivityData?.activitySector),this.activityForm.controls.activityScope.setValue(this.selectedActivityData?.activityScope),this.activityForm.controls.title.setValue(this.selectedActivityData?.title)})}get organizations$(){return this.organizationService.getAllOrganizations()}getAllOrganization(){this.organizations$.subscribe(e=>{this.organizationsData=e?.organizations,this.organizationList=e?.organizations})}get activityMasterData$(){return this.activityService.getActivitiesMasterData()}getActivityMasterData(){this.activityService.getActivitiesMasterData().subscribe(e=>{this.activityTypesData=e?.data?.activityTypesData,this.activityRelatedTypesData=e?.data?.activityRelatedTypesData,this.activityEntryTypesData=e?.data?.activityEntryTypesData,this.activitySectorsData=e?.data?.activitySectorsData,this.activityScopesData=e?.data?.activityScopesData})}generateAddNewUserForm(){this.activityForm=this.formBuilder.group({activityType:["",_.kI.required],activityRelatedTo:["",_.kI.required],organization:["",_.kI.required],activitEntryType:["",_.kI.required],activitySector:["",_.kI.required],activityScope:["",_.kI.required],title:["",_.kI.required],createdByOrganization:["",_.kI.required]})}get activity$(){return this.activityService.getActivityById(this.selectedActivityId)}onSubmit(){if(this.selectedActivityId){const e={...this.activityForm.value,attachments:this.filesListArray,organization:this.selectedOrganizationValue,priority:F[0],status:v[0]};this.activityService.updateActivity(this.selectedActivityId,e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity updated Successfully",action:"ok"})},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}else{this.selectedOrganizationValue=this.activityForm.get("organization")?.value.map(i=>i._id);const e={...this.activityForm.value,attachments:this.filesListArray,organization:this.selectedOrganizationValue,priority:F[0],status:v[0],description:this.descriptionOfTextEditor,visibility:"EVERYONE"};this.activityService.postActivity(e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity Created Successfully",action:"ok"}),this.router.navigate([T.p.ACTIVITY])},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}}relatedValue(e){"Multiple Ministries/Departments"===e.value&&(this.isMultipleOrganization=!1)}removeChip(e){let i=this.activityForm.controls.organization;i.value.splice(e,1),this.activityForm.controls.organization?.setValue(i.value)}removeFileChip(e){this.filesListArray.splice(e,1)}getUserDetails(){this.userDetailsService.getUserDetails().subscribe(e=>{this.userDetails=e,1===this.userDetails?.organization?.length&&this.activityForm?.controls.createdByOrganization?.setValue(this.userDetails?.organization[0])})}updatedDescription(e){this.descriptionOfTextEditor=e}updatedFilesDescription(e){for(var i=0;i<e.length;i++)this.filesListArray.push({name:e[i].name,size:e[i].size.toString(),path:"string"})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(P.M),t.Y36(p.qu),t.Y36(I.M),t.Y36(k.z),t.Y36(U.V),t.Y36(A.gz),t.Y36(M.H),t.Y36(A.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-createactivity"]],decls:73,vars:12,consts:[[1,"container","create-activity"],[1,"d-flex","create-activity-header","align-items-baseline"],["class","d-flex justify-content-center",4,"ngIf"],[1,"acitivity-panel"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-6"],[4,"ngIf"],[1,"col-6","mb-4"],[3,"removable","removed",4,"ngFor","ngForOf"],["appearance","outline",1,"input-field"],["formControlName","activityType"],[3,"value",4,"ngFor","ngForOf"],["multiple","multiple","formControlName","organization"],["formControlName","activityRelatedTo"],["appearance","outline",1,"col-12"],["formControlName","activitEntryType"],["formControlName","activitySector"],["formControlName","activityScope"],[1,"col-12"],["matInput","","placeholder","Add an activity here & hit enter...","input","","type","text","formControlName","title"],[1,"m-0"],[1,"text-editor","mb-1"],["value","",3,"updatedDescription"],[1,"mt-2"],[3,"updatedFilesDescription"],[1,"text-end"],["mat-raised-button","","color","primary","type","submit"],[1,"d-flex","justify-content-center"],[1,"errorMsg"],["formControlName","createdByOrganization"],[3,"value"],[1,"username"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon"),t._uU(3," note_add"),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.YNc(6,Ve,3,0,"div",2),t.TgZ(7,"div",3)(8,"form",4),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(9,"div",5)(10,"div",6),t.YNc(11,je,6,1,"ng-container",7),t.YNc(12,Ke,3,1,"ng-container",7),t.qZA(),t.TgZ(13,"div",8)(14,"mat-chip-list"),t.YNc(15,Xe,3,3,"mat-chip",9),t.qZA()()(),t.TgZ(16,"div",5)(17,"div",6)(18,"mat-form-field",10)(19,"mat-label"),t._uU(20,"Type"),t.qZA(),t.TgZ(21,"mat-select",11),t.YNc(22,ti,2,2,"mat-option",12),t.qZA()()(),t.TgZ(23,"div",6)(24,"mat-form-field",10)(25,"mat-label"),t._uU(26,"Ministry/Department"),t.qZA(),t.TgZ(27,"mat-select",13),t.YNc(28,ei,2,2,"mat-option",12),t.qZA()()()(),t.TgZ(29,"div",5)(30,"div",6)(31,"mat-form-field",10)(32,"mat-label"),t._uU(33,"Related To"),t.qZA(),t.TgZ(34,"mat-select",14),t.YNc(35,ii,2,2,"mat-option",12),t.qZA()()(),t.TgZ(36,"div",6)(37,"mat-form-field",15)(38,"mat-label"),t._uU(39,"Entry Type"),t.qZA(),t.TgZ(40,"mat-select",16),t.YNc(41,ai,2,2,"mat-option",12),t.qZA()()()(),t.TgZ(42,"div",5)(43,"div",6)(44,"mat-form-field",10)(45,"mat-label"),t._uU(46,"Sector"),t.qZA(),t.TgZ(47,"mat-select",17),t.YNc(48,ni,2,2,"mat-option",12),t.qZA()()(),t.TgZ(49,"div",6)(50,"mat-form-field",10)(51,"mat-label"),t._uU(52,"Scope"),t.qZA(),t.TgZ(53,"mat-select",18),t.YNc(54,oi,2,2,"mat-option",12),t.qZA()()()(),t.TgZ(55,"div",5)(56,"div",19)(57,"mat-form-field",10)(58,"mat-label"),t._uU(59,"Title"),t.qZA(),t.TgZ(60,"div"),t._UZ(61,"input",20),t.qZA()()()(),t.TgZ(62,"h3",21),t._uU(63,"Description :"),t.qZA(),t.TgZ(64,"div",22)(65,"app-rich-text-editor",23),t.NdJ("updatedDescription",function(c){return i.updatedDescription(c)}),t.qZA()(),t.TgZ(66,"div",24)(67,"h3",21),t._uU(68,"Attachments :"),t.qZA(),t.TgZ(69,"app-fileuploader",25),t.NdJ("updatedFilesDescription",function(c){return i.updatedFilesDescription(c)}),t.qZA()(),t.TgZ(70,"div",26)(71,"button",27),t._uU(72,"Submit"),t.qZA()()()()()),2&e){let n;t.xp6(5),t.Oqu(i.selectedActivityId?"Update Activity":"Create Activity"),t.xp6(1),t.Q6J("ngIf",0===(null==i.userDetails||null==i.userDetails.organizationsdata?null:i.userDetails.organizationsdata.length)),t.xp6(2),t.Q6J("formGroup",i.activityForm),t.xp6(3),t.Q6J("ngIf",(null==i.userDetails||null==i.userDetails.organizationsdata?null:i.userDetails.organizationsdata.length)>1),t.xp6(1),t.Q6J("ngIf",(null==i.userDetails||null==i.userDetails.organizationsdata?null:i.userDetails.organizationsdata.length)<=1),t.xp6(3),t.Q6J("ngForOf",null==(n=i.activityForm.get("organization"))?null:n.value),t.xp6(7),t.Q6J("ngForOf",i.activityTypesData),t.xp6(6),t.Q6J("ngForOf",i.organizationsData),t.xp6(7),t.Q6J("ngForOf",i.activityRelatedTypesData),t.xp6(6),t.Q6J("ngForOf",i.activityEntryTypesData),t.xp6(7),t.Q6J("ngForOf",i.activitySectorsData),t.xp6(6),t.Q6J("ngForOf",i.activityScopesData)}},dependencies:[u.sg,u.O5,p._Y,p.Fj,p.JJ,p.JL,p.sg,p.u,O.ey,E.lW,Z.qn,Z.HS,Z.qH,N.Hw,f.KE,f.hX,Y.Nt,L.gD,H,$],styles:[".container[_ngcontent-%COMP%]{background-color:#fff}.create-activity[_ngcontent-%COMP%]{padding:0;width:80%;border:1px solid silver}.create-activity-header[_ngcontent-%COMP%]{background:#eeeeee;border-bottom:1px solid #dcdadb;color:#444;font-size:22px;font-weight:700;height:55px;padding:11px 10px 0;gap:5px}.text-editor[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2)}.username[_ngcontent-%COMP%]{font-size:20px}.input-field[_ngcontent-%COMP%]{display:block}  .NgxEditor{height:200px;overflow-y:auto;border-radius:0}  .NgxEditor__Content{min-height:150px}.errorMsg[_ngcontent-%COMP%]{color:#c45454}"]}),a})()},{path:"details",component:xt}];let si=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[A.Bz.forChild(ci),A.Bz]}),a})();var ri=l(1252);let li=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[u.ez,si,p.UX,ri.m,p.u5]}),a})()},8202:(j,S,l)=>{l.d(S,{t:()=>u});const u={IS_ACTIVE:2,MINISTRIES:1,ASSOCIATION:0,INACTIVE:3,MY_PROFILE:4,CHANGE_PASSWORD:5,NOTIFICATIONS:6,EMAIL_REPORTS:7}}}]);