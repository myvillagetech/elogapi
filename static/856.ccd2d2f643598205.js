"use strict";(self.webpackChunkelog_web=self.webpackChunkelog_web||[]).push([[856],{9856:(H,A,r)=>{r.r(A),r.d(A,{ActivityModule:()=>Xt});var p=r(6895),_=r(3060),c=r(4006),I=r(7030);const T=["NONE","LOW","MEDIUM","HIGH"],V=["INTERNAL","EVERYONE"],Z=["NEW","INPROGRESS","REJECTED","NOT ADMISSIBLE","RESOLVED"];var t=r(4650),j=r(3248);let N=(()=>{class a{constructor(e){this.httpDataService=e}getAllActivities(){return this.httpDataService.get("activity")}getActivitiesMasterData(){return this.httpDataService.get("activity-masterdata")}createActivity(e){return this.httpDataService.post("activity-type",e)}postActivity(e){return this.httpDataService.post("activity",e)}getActivityMastarData(){return this.httpDataService.get("activity-masterdata")}getActivityById(e){return this.httpDataService.get(`activity/${e}`)}updateActivity(e,i){return this.httpDataService.put(`activity/${e}`,i)}updateActivityLogById(e,i){return this.httpDataService.put(`activity/activityLog/${e}`,i)}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(j.L))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var z=r(7199),S=r(2653),q=r(3238),U=r(4859),P=r(3546),y=r(9602),D=r(7392),v=r(9549),Q=r(4144),h=r(8255),C=r(1948),w=r(4385),m=r(5869);let Y=(()=>{class a{constructor(e){this.fb=e,this.value="<h3>Write Here....</h3>",this.updatedDescription=new t.vpe,this.toolbar=[["bold","italic"],["underline","strike"],["code","blockquote"],["ordered_list","bullet_list"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"],["align_left","align_center","align_right","align_justify"]]}ngOnInit(){this.editor=new m.ML,this.editor.commands.focus().scrollIntoView().exec(),this.createformgroup(),this.richtextForm.controls.description.valueChanges.subscribe(e=>{this.updatedDescription.emit(e)})}createformgroup(){this.richtextForm=this.fb.group({description:[""]})}ngOnDestroy(){this.editor.destroy()}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.qu))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-rich-text-editor"]],inputs:{value:"value"},outputs:{updatedDescription:"updatedDescription"},decls:3,vars:6,consts:[[3,"formGroup"],[3,"editor","toolbar"],["formControlName","description",3,"editor","placeholder","ngModel"]],template:function(e,i){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"ngx-editor-menu",1)(2,"ngx-editor",2),t.qZA()),2&e&&(t.Q6J("formGroup",i.richtextForm),t.xp6(1),t.Q6J("editor",i.editor)("toolbar",i.toolbar),t.xp6(1),t.Q6J("editor",i.editor)("placeholder","Type here...")("ngModel",i.value))},dependencies:[m.tP,m.Mn,c._Y,c.JJ,c.JL,c.sg,c.u]}),a})();function G(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"div",6)(1,"div",7)(2,"mat-icon"),t._uU(3,"insert_drive_file"),t.qZA()(),t.TgZ(4,"div",8)(5,"h4",9),t._uU(6),t.qZA(),t.TgZ(7,"p",10),t._uU(8),t.qZA()(),t.TgZ(9,"div",11),t.NdJ("click",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.deleteFile(s))}),t.TgZ(10,"mat-icon"),t._uU(11,"delete_forever"),t.qZA()()()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(6),t.hij(" ",null==e?null:e.name," "),t.xp6(2),t.hij(" ",i.formatBytes(null==e?null:e.size)," ")}}let E=(()=>{class a{constructor(e){this.alertpopupService=e,this.updatedFilesDescription=new t.vpe,this.files=[]}ngOnInit(){}onFileDropped(e){this.prepareFilesList(e)}fileBrowseHandler(e){this.prepareFilesList(e.target.files)}deleteFile(e){this.files.splice(e,1)}prepareFilesList(e){for(const i of e)console.log(i),"image/jpeg"==i.type||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==i.type||"image/png"==i.type||"application/vnd.openxmlformats-officedocument.presentationml.presentation"==i.type||"application/pdf"==i.type||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==i.type&&i.size<=262144e3?this.files.push(i):this.alertpopupService.open({message:`${i.type} is not accept `,action:"ok"});this.updatedFilesDescription.emit(this.files)}formatBytes(e,i){if(0===e)return"0 Bytes";const s=i<=0?0:i||2,g=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,g)).toFixed(s))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][g]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(S.z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-fileuploader"]],outputs:{updatedFilesDescription:"updatedFilesDescription"},decls:13,vars:1,consts:[["appDnd","",1,"container",3,"fileDropped"],["type","file","id","fileDropRef","multiple","",3,"change"],["fileDropRef",""],["for","fileDropRef"],[1,"files-list"],["class","single-file",4,"ngFor","ngForOf"],[1,"single-file"],[1,"file-icon",2,"width","50px"],[1,"info"],[1,"name"],[1,"size"],[1,"delete",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.NdJ("fileDropped",function(s){return i.onFileDropped(s)}),t.TgZ(1,"input",1,2),t.NdJ("change",function(s){return i.fileBrowseHandler(s)}),t.qZA(),t.TgZ(3,"mat-icon"),t._uU(4,"upload_file"),t.qZA(),t.TgZ(5,"h3"),t._uU(6,"Drag and drop file here"),t.qZA(),t.TgZ(7,"h3"),t._uU(8,"or"),t.qZA(),t.TgZ(9,"label",3),t._uU(10,"Browse for file"),t.qZA()(),t.TgZ(11,"div",4),t.YNc(12,G,12,2,"div",5),t.qZA()),2&e&&(t.xp6(12),t.Q6J("ngForOf",i.files))},dependencies:[p.sg,D.Hw],styles:[".container[_ngcontent-%COMP%]{width:450px;height:200px;padding:2rem;text-align:center;border:dashed 1px #979797;position:relative;margin:0 auto}input[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:2;width:100%;height:100%;top:0;left:0}label[_ngcontent-%COMP%]{color:#fff;width:183px;height:44px;border-radius:21.5px;background-color:#db202f;padding:8px 16px}h3[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#38424c}.fileover[_ngcontent-%COMP%]{animation:shake 1s;animation-iteration-count:infinite}.files-list[_ngcontent-%COMP%]{margin-top:1.5rem}.single-file[_ngcontent-%COMP%]{display:flex;padding:.5rem;justify-content:space-between;align-items:center;border:dashed 1px #979797;margin-bottom:1rem}.delete[_ngcontent-%COMP%]{margin-left:.5rem;cursor:pointer;align-self:flex-end;display:flex;flex-grow:1}.name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#353f4a;margin:0}.size[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#a4a4a4;margin:0;margin-bottom:.25rem}.info[_ngcontent-%COMP%]{width:100%}"]}),a})();function W(a,o){if(1&a&&(t.TgZ(0,"div",34)(1,"mat-card")(2,"mat-card-content")(3,"h3"),t._uU(4," Created by "),t.TgZ(5,"span",35)(6,"strong"),t._uU(7),t.ALo(8,"titlecase"),t.qZA()()(),t._UZ(9,"div",36),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(7),t.Oqu(t.lcZ(8,2,e.title)),t.xp6(2),t.Q6J("innerHTML",e.message,t.oJD)}}function K(a,o){if(1&a&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.hij(" ",e.organization,"")}}const X=function(){return{width:"180px"}};let tt=(()=>{class a{constructor(e,i,n,s,l,g){this.activatedRoute=e,this.activityService=i,this.formBuilder=n,this.organizationService=s,this.router=l,this.alertpopupService=g,this.Priority=T,this.visibility=V,this.status=Z,this.filesListArray=[],this.description="",this.toDay=new Date,this.activatedRoute.queryParams.subscribe(f=>{this.selectedActivityId=f.aId,console.log(this.selectedActivityId)})}ngOnInit(){this.getActivityDetailsById(),this.getActivityMasterData(),this.getAllOrganizationsBySearchCriteria(),this.genarateActivityLogForm()}getActivityDetailsById(){this.activityService.getActivityById(this.selectedActivityId).subscribe(e=>{this.activityData=e.data[0],this.selectedActivityEntryTypeId=e.data[0].activitEntryType,this.selectedActivityRelatedTypeId=e.data[0].activityRelatedTo,this.selectedActivitySectorId=e.data[0].activitySector,this.selectedActivityScopeId=e.data[0].activityScope,this.selectedActivityCreatedById=e.data[0].createdBy,console.log(this.activityData.organizationData[0].organization),console.log(e),this.organizationCreatedBy=this.activityData.organizationData[0].organization,this.activityLogData=this.activityData.activityLog})}getActivityMasterData(){this.activityService.getActivitiesMasterData().subscribe(e=>{this.activityEntryType=e.data?.activityEntryTypesData.filter(i=>i._id==this.selectedActivityEntryTypeId).map(i=>i.name),this.activityRelatedTypesData=e.data?.activityRelatedTypesData.filter(i=>i._id==this.selectedActivityRelatedTypeId).map(i=>i.name),this.activitySectorsData=e.data?.activitySectorsData.filter(i=>i._id==this.selectedActivitySectorId).map(i=>i.name),this.ActivityScopeData=e.data?.activityScopesData.filter(i=>i._id==this.selectedActivityScopeId).map(i=>i.name),this.ActivityScopeData=e.data?.activityScopesData.filter(i=>i._id==this.selectedActivityScopeId).map(i=>i.name)})}genarateActivityLogForm(){this.activityLogForm=this.formBuilder.group({priority:["",[c.kI.required]],visibility:["",[c.kI.required]],status:["",[c.kI.required]],assignTo:["",[c.kI.required]],attachments:["",[c.kI.required]],message:["",[c.kI.required]]})}onSubmit(){console.log({...this.activityLogForm.value,attachments:this.filesListArray,message:this.description});const e={...this.activityLogForm.value,attachments:this.filesListArray,message:this.description};this.activityService.updateActivityLogById(this.selectedActivityId,e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity Updated Successfully",action:"ok"})},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}getAllOrganizationsBySearchCriteria(){this.organizationService.getOrganizationsSearchCriteria({pageNumber:0,pageSize:50,sortField:"",sortOrder:0,type:"63973bfb61ab6f49bfdd3c35",organization:"",organizationId:"",isActive:!0,userId:"",userSearch:""}).subscribe(i=>{this.organizationList=i.data.organizations})}updatedDescription(e){this.description=e}updatedFilesDescription(e){for(var i=0;i<e.length;i++)this.filesListArray.push({name:e[i].name,size:e[i].size,path:"string"})}updateActivityDetails(){this.router.navigate([I.p.CREATEACTIVITY],{queryParams:{aId:this.selectedActivityId}})}dueDateSetter(e,i){"noDueDate"==e?this.selectedDate="":"Today"==e?this.selectedDate=new Date:"Tomorrow"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+1)):"Next Monday"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+(7-this.toDay.getDay())%7+1)):"This Friday"==e?this.selectedDate=new Date(this.toDay.setDate(this.toDay.getDate()+(12-this.toDay.getDay())%7)):"custom"==e&&(this.selectedDate=i.value)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(_.gz),t.Y36(N),t.Y36(c.qu),t.Y36(z.M),t.Y36(_.F0),t.Y36(S.z))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity-details"]],decls:199,vars:39,consts:[[1,"row","container"],[1,"row"],[1,"col-md-8"],[1,"col-md-3"],[1,"table","table-borderless"],["class","col-md-12 my-2",4,"ngFor","ngForOf"],[3,"formGroup","ngSubmit"],["value","",3,"updatedDescription"],["appearance","outline"],["formControlName","status"],[3,"value"],["aria-label","","formControlName","priority","layout","row"],[1,"row","mb-3"],[1,"col-sm-3","col-form-label"],[1,"col-sm-8"],["aria-label","","formControlName","visibility","layout","row"],["formControlName","assignTo"],[3,"value",4,"ngFor","ngForOf"],[3,"updatedFilesDescription"],[1,"d-flex","justify-content-end","align-items-center"],["mat-raised-button","",1,"btn"],["mat-raised-button","","color","primary","type","submit"],["mat-stroked-button","",1,"refresh"],["mat-stroked-button","",3,"click"],["mat-stroked-button",""],[1,"d-flex"],[1,"mat-Icon"],["mat-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"click"],["appearance","fill",3,"ngStyle","click"],["matInput","",3,"matDatepicker","dateChange"],["matIconSuffix","",3,"for"],["picker",""],[1,"col-md-12","my-2"],[1,"organization-title"],[3,"innerHTML"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.ALo(7,"date"),t.qZA(),t._UZ(8,"hr"),t.TgZ(9,"div",1)(10,"div",3)(11,"table",4)(12,"tbody")(13,"tr")(14,"td"),t._uU(15,"Type"),t.qZA(),t.TgZ(16,"td"),t._uU(17,"---"),t.qZA()(),t.TgZ(18,"tr")(19,"td"),t._uU(20,"Entry Type:"),t.qZA(),t.TgZ(21,"td"),t._uU(22),t.qZA()(),t.TgZ(23,"tr")(24,"td"),t._uU(25,"Related To:"),t.qZA(),t.TgZ(26,"td"),t._uU(27),t.qZA()(),t.TgZ(28,"tr")(29,"td"),t._uU(30,"Priority:"),t.qZA(),t.TgZ(31,"td"),t._uU(32),t.ALo(33,"titlecase"),t.qZA()(),t.TgZ(34,"tr")(35,"td"),t._uU(36,"Status:"),t.qZA(),t.TgZ(37,"td"),t._uU(38),t.ALo(39,"titlecase"),t.qZA()()()()(),t.TgZ(40,"div",3)(41,"table",4)(42,"tbody")(43,"tr")(44,"td"),t._uU(45,"Reported By:"),t.qZA(),t.TgZ(46,"td"),t._uU(47,"-"),t.qZA()(),t.TgZ(48,"tr")(49,"td"),t._uU(50,"Ministry/Department:"),t.qZA(),t.TgZ(51,"td"),t._uU(52,"-"),t.qZA()(),t.TgZ(53,"tr")(54,"td"),t._uU(55,"Organization:"),t.qZA(),t.TgZ(56,"td"),t._uU(57),t.qZA()()()()(),t.TgZ(58,"div",3)(59,"table",4)(60,"tbody")(61,"tr")(62,"td"),t._uU(63,"Sector:"),t.qZA(),t.TgZ(64,"td"),t._uU(65),t.qZA()(),t.TgZ(66,"tr")(67,"td"),t._uU(68,"Scope:"),t.qZA(),t.TgZ(69,"td"),t._uU(70),t.qZA()()()()(),t.TgZ(71,"div"),t.YNc(72,W,10,4,"div",5),t.TgZ(73,"form",6),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(74,"div")(75,"label"),t._uU(76," Write your Reply: "),t.qZA(),t.TgZ(77,"app-rich-text-editor",7),t.NdJ("updatedDescription",function(s){return i.updatedDescription(s)}),t.qZA()(),t.TgZ(78,"mat-form-field",8)(79,"mat-label"),t._uU(80,"Status: "),t.qZA(),t.TgZ(81,"mat-select",9)(82,"mat-option",10),t._uU(83,"New"),t.qZA(),t.TgZ(84,"mat-option",10),t._uU(85,"In Progress"),t.qZA(),t.TgZ(86,"mat-option",10),t._uU(87,"Not Admissible"),t.qZA(),t.TgZ(88,"mat-option",10),t._uU(89,"Resolved"),t.qZA()()(),t.TgZ(90,"mat-radio-group",11)(91,"div",12)(92,"mat-label",13),t._uU(93,"Priority:"),t.qZA(),t.TgZ(94,"div",14)(95,"mat-radio-button",10),t._uU(96,"None"),t.qZA(),t.TgZ(97,"mat-radio-button",10),t._uU(98,"Low"),t.qZA(),t.TgZ(99,"mat-radio-button",10),t._uU(100,"Medium"),t.qZA(),t.TgZ(101,"mat-radio-button",10),t._uU(102,"High"),t.qZA()()()(),t.TgZ(103,"mat-radio-group",15)(104,"div",12)(105,"mat-label",13),t._uU(106,"Visibility:"),t.qZA(),t.TgZ(107,"div",14)(108,"mat-radio-button",10),t._uU(109,"Internal"),t.qZA(),t.TgZ(110,"mat-radio-button",10),t._uU(111,"Everyone"),t.qZA()()()(),t.TgZ(112,"mat-form-field",8)(113,"mat-label"),t._uU(114,"Assign to"),t.qZA(),t.TgZ(115,"mat-select",16),t.YNc(116,K,2,2,"mat-option",17),t.qZA()(),t.TgZ(117,"div")(118,"app-fileuploader",18),t.NdJ("updatedFilesDescription",function(s){return i.updatedFilesDescription(s)}),t.qZA()(),t.TgZ(119,"div",19)(120,"button",20),t._uU(121,"CANCEL"),t.qZA(),t.TgZ(122,"button",21),t._uU(123," Post "),t.qZA()()()()()(),t.TgZ(124,"div",3)(125,"button",22)(126,"mat-icon"),t._uU(127,"refresh"),t.qZA()(),t.TgZ(128,"button",23),t.NdJ("click",function(){return i.updateActivityDetails()}),t.TgZ(129,"mat-icon"),t._uU(130,"edit"),t.qZA()(),t.TgZ(131,"button",24)(132,"mat-icon"),t._uU(133,"archive"),t.qZA()(),t.TgZ(134,"button",24)(135,"mat-icon"),t._uU(136,"delete"),t.qZA()(),t.TgZ(137,"button",24)(138,"mat-icon"),t._uU(139,"timeline"),t.qZA()(),t.TgZ(140,"button",24)(141,"mat-icon"),t._uU(142,"checkmark"),t.qZA()(),t.TgZ(143,"button",24)(144,"mat-icon"),t._uU(145,"download"),t.qZA()(),t._UZ(146,"hr"),t.TgZ(147,"div",25)(148,"mat-icon",26),t._uU(149,"assignment_ind"),t.qZA(),t.TgZ(150,"h4"),t._uU(151," Assigned To "),t.TgZ(152,"strong"),t._uU(153),t.qZA()()(),t.TgZ(154,"div",25)(155,"mat-icon"),t._uU(156," date_range"),t.qZA(),t.TgZ(157,"h4"),t._uU(158),t.ALo(159,"date"),t.qZA(),t.TgZ(160,"button",27)(161,"mat-icon"),t._uU(162,"view_headline"),t.qZA()(),t.TgZ(163,"mat-menu",null,28)(165,"button",29),t.NdJ("click",function(){return i.dueDateSetter("noDueDate")}),t._uU(166," No Due Date "),t.qZA(),t.TgZ(167,"button",29),t.NdJ("click",function(){return i.dueDateSetter("Today")}),t._uU(168,"Today"),t.qZA(),t.TgZ(169,"button",29),t.NdJ("click",function(){return i.dueDateSetter("Tomorrow")}),t._uU(170," Tomorrow "),t.qZA(),t.TgZ(171,"button",29),t.NdJ("click",function(){return i.dueDateSetter("Next Monday")}),t._uU(172," Next Monday "),t.qZA(),t.TgZ(173,"button",29),t.NdJ("click",function(){return i.dueDateSetter("This Friday")}),t._uU(174," This Friday "),t.qZA(),t.TgZ(175,"mat-form-field",30),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(176,"mat-label"),t._uU(177,"Choose a date"),t.qZA(),t.TgZ(178,"input",31),t.NdJ("dateChange",function(s){return i.dueDateSetter("custom",s)}),t.qZA(),t._UZ(179,"mat-datepicker-toggle",32)(180,"mat-datepicker",null,33),t.qZA()()(),t._UZ(182,"hr"),t.TgZ(183,"div",25)(184,"mat-icon"),t._uU(185,"attach_file"),t.qZA(),t.TgZ(186,"h2"),t._uU(187,"No Files in this Activity"),t.qZA()(),t.TgZ(188,"div")(189,"mat-icon"),t._uU(190,"perm_identity"),t.qZA()(),t.TgZ(191,"div")(192,"mat-icon"),t._uU(193,"Activities"),t.qZA()(),t.TgZ(194,"div")(195,"h3")(196,"mat-icon"),t._uU(197,"group"),t.qZA(),t._uU(198," People Involved"),t.qZA()()()()()),2&e){const n=t.MAs(164),s=t.MAs(181);t.xp6(4),t.Oqu(null==i.activityDetails?null:i.activityDetails.title),t.xp6(2),t.hij("Last updated on ",t.xi3(7,28,null==i.activityData?null:i.activityData.createdAt,"medium"),""),t.xp6(16),t.Oqu(i.activityEntryType),t.xp6(5),t.Oqu(i.activityRelatedTypesData),t.xp6(5),t.Oqu(t.lcZ(33,31,null==i.activityData?null:i.activityData.priority)),t.xp6(6),t.Oqu(t.lcZ(39,33,null==i.activityData?null:i.activityData.status)),t.xp6(19),t.Oqu(i.organizationCreatedBy),t.xp6(8),t.Oqu(i.activitySectorsData),t.xp6(5),t.Oqu(i.ActivityScopeData),t.xp6(2),t.Q6J("ngForOf",i.activityLogData),t.xp6(1),t.Q6J("formGroup",i.activityLogForm),t.xp6(9),t.Q6J("value",i.status[0]),t.xp6(2),t.Q6J("value",i.status[1]),t.xp6(2),t.Q6J("value",i.status[2]),t.xp6(2),t.Q6J("value",i.status[3]),t.xp6(7),t.Q6J("value",i.Priority[0]),t.xp6(2),t.Q6J("value",i.Priority[1]),t.xp6(2),t.Q6J("value",i.Priority[2]),t.xp6(2),t.Q6J("value",i.Priority[3]),t.xp6(7),t.Q6J("value",i.visibility[0]),t.xp6(2),t.Q6J("value",i.visibility[1]),t.xp6(6),t.Q6J("ngForOf",i.organizationList),t.xp6(37),t.hij(" ",i.organizationCreatedBy,""),t.xp6(5),t.hij("Due On ",t.xi3(159,35,null==i.activityData?null:i.activityData.dueDate,"medium"),""),t.xp6(2),t.Q6J("matMenuTriggerFor",n),t.xp6(15),t.Q6J("ngStyle",t.DdM(38,X)),t.xp6(3),t.Q6J("matDatepicker",s),t.xp6(1),t.Q6J("for",s)}},dependencies:[p.sg,p.PC,c._Y,c.JJ,c.JL,c.sg,c.u,q.ey,U.lW,P.a8,P.dn,y.Mq,y.hl,y.nW,D.Hw,v.KE,v.hX,Q.Nt,h.VK,h.OP,h.p6,C.VQ,C.U0,w.gD,Y,E,p.rS,p.uU],styles:[".mat-Icon[_ngcontent-%COMP%]{font-size:50px;width:50px;height:50px}"]}),a})();var et=r(5017),d=r(3626),R=r(8739),L=r(8202),it=r(5150),k=r(6308),F=r(4025),at=r(7335);const u_createddate=[{DisplayName:"AnyTime",key:"Anytime"},{DisplayName:"PastHour",key:"Pasthour"},{DisplayName:"Past 24 hours",key:"Past24hours"},{DisplayName:"Past Week",key:"Pastweek"},{DisplayName:"Past Month",key:"Pastmonth"},{DisplayName:"Past Year",key:"Pastyear"},{DisplayName:"Custom Range",key:"Customrange"}],u_status=[{DisplayName:"All",key:"all"},{DisplayName:"Not Admissible",key:"Not Admissible"},{DisplayName:"New",key:"New"},{DisplayName:"In Progress",key:"In Progress"},{DisplayName:"Resolved",key:"Resolved"}],u_types=[{DisplayName:"Documentation/Procedure",key:"Documentation/Procedure"},{DisplayName:"Policy/Rules/Regulation",key:"Policy/Rules/Regulation"},{DisplayName:"Schemes/Programmes",key:"Schemes/Programmes"},{DisplayName:"Others",key:"Others"}],u_entrytype=[{DisplayName:"Issue",key:"Issue"},{DisplayName:"Suggestion",key:"Suggestion"},{DisplayName:"Other",key:"Other"}],u_geography=[{DisplayName:"Exim",key:"Exim"},{DisplayName:"Domestic",key:"Domestic"},{DisplayName:"Others",key:"Others"}],u_scope=[{DisplayName:"National",key:"National"},{DisplayName:"InterState",key:"InterState"}],u_priority=[{DisplayName:"NONE",key:"None"},{DisplayName:"LOW",key:"Low"},{DisplayName:"MEDIUM",key:"Medium"},{DisplayName:"HIGH",key:"High"}],u_createdby=[],u_assignedto=[],u_groupby=[{DisplayName:"Due Date",key:"dueDate"},{DisplayName:"Status",key:"status"},{DisplayName:"Priority",key:"priority"},{DisplayName:"Assigned to",key:"assigned to"}],u_sortby=[{DisplayName:"Tittle",key:"tittle"},{DisplayName:"Activity#",key:"activity"},{DisplayName:"Due Date",key:"due date"},{DisplayName:"Assigned to",key:"assigned to"}];var B=r(9690),ot=r(6709),M=r(3848);function nt(a,o){if(1&a&&(t.TgZ(0,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",45)(2,"mat-checkbox",46),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e.DisplayName," ")}}function st(a,o){if(1&a&&(t.TgZ(0,"mat-radio-button",47),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e.DisplayName," ")}}function rt(a,o){if(1&a&&(t.TgZ(0,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",45)(2,"mat-checkbox",46),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e.DisplayName," ")}}function ct(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"section",45)(1,"mat-checkbox",48),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.typeChanged(n))}),t._uU(2),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(1),t.s9C("value",e._id),t.xp6(1),t.hij(" ",e.name," ")}}function lt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"section",45)(1,"mat-checkbox",48),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.entryTypeChanged(n))}),t._uU(2),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(1),t.s9C("value",e._id),t.xp6(1),t.hij(" ",e.name," ")}}function pt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"section",45)(1,"mat-checkbox",48),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(s.geographyChanged(n))}),t._uU(2),t.qZA()()}if(2&a){const e=o.$implicit;t.xp6(1),t.s9C("value",e._id),t.xp6(1),t.hij(" ",e.name," ")}}function mt(a,o){if(1&a&&(t.TgZ(0,"section",45)(1,"mat-checkbox",49),t._uU(2),t.qZA()()),2&a){const e=o.$implicit;t.xp6(1),t.s9C("value",e._id),t.xp6(1),t.hij(" ",e.name," ")}}function ut(a,o){if(1&a&&(t.TgZ(0,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",45)(2,"mat-checkbox",46),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e.DisplayName," ")}}function dt(a,o){if(1&a&&(t.TgZ(0,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",45)(2,"mat-checkbox",46),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function gt(a,o){if(1&a&&(t.TgZ(0,"div",9),t.NdJ("click",function(i){return i.stopPropagation()}),t.TgZ(1,"section",45)(2,"mat-checkbox",46),t._uU(3),t.qZA()()()),2&a){const e=o.$implicit;t.xp6(3),t.hij(" ",e," ")}}function yt(a,o){if(1&a&&(t.TgZ(0,"mat-option"),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function vt(a,o){if(1&a&&(t.TgZ(0,"mat-option"),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.DisplayName," ")}}function _t(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"assignment"),t.qZA(),t._uU(2," All Tasks "))}function ht(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"assignment_ind"),t.qZA(),t._uU(2," My Tasks "))}function ft(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"hourglass_empty"),t.qZA(),t._uU(2," Overdue "))}function At(a,o){1&a&&(t.TgZ(0,"mat-icon"),t._uU(1,"wb_incandescent"),t.qZA(),t._uU(2," High Priority "))}function Tt(a,o){1&a&&(t.TgZ(0,"div")(1,"mat-tab"),t.YNc(2,At,3,0,"ng-template",29),t.qZA()())}function Zt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"th",50)(1,"mat-checkbox",51),t.NdJ("change",function(n){t.CHM(e);const s=t.oxw();return t.KtG(n?s.toggleAllRows():null)}),t.qZA()()}if(2&a){const e=t.oxw();t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function Dt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",52)(1,"mat-checkbox",53),t.NdJ("click",function(n){return n.stopPropagation()})("change",function(n){const l=t.CHM(e).$implicit,g=t.oxw();return t.KtG(n?g.selection.toggle(l):null)}),t.qZA()()}if(2&a){const e=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("checked",i.selection.isSelected(e))("aria-label",i.checkboxLabel(e))}}function Ct(a,o){1&a&&(t.TgZ(0,"th",54),t._uU(1," Activity "),t.qZA())}function bt(a,o){if(1&a&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.activityType," ")}}function xt(a,o){1&a&&(t.TgZ(0,"th",54),t._uU(1," Title "),t.qZA())}function Nt(a,o){if(1&a&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.title," ")}}function St(a,o){1&a&&(t.TgZ(0,"th",54),t._uU(1," Priority "),t.qZA())}function qt(a,o){if(1&a&&(t.TgZ(0,"td",52),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",e.priority," ")}}function Ut(a,o){1&a&&(t.TgZ(0,"th",54),t._uU(1," Due date "),t.qZA())}function kt(a,o){if(1&a&&(t.TgZ(0,"td",52),t._uU(1),t.ALo(2,"date"),t.qZA()),2&a){const e=o.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,e.updatedAt,"fullDate")," ")}}function Ft(a,o){1&a&&(t.TgZ(0,"th",54),t._uU(1," actions "),t.qZA())}function Mt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"td",52)(1,"button",9),t.NdJ("click",function(){const s=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.activityDetails(s._id))}),t._uU(2,"details"),t.qZA()()}}function Jt(a,o){1&a&&t._UZ(0,"tr",55)}function Ot(a,o){1&a&&t._UZ(0,"tr",56)}const $=new Date,b=$.getMonth(),x=$.getFullYear();let It=(()=>{class a{constructor(e,i,n){this.activityService=e,this.storageService=i,this.router=n,this.groupby=["Due Date","Status","Priority","Assigned to"],this.sortby=["Tittle","Activity#","Due Date","Assigned to"],this.displayedColumns=["select","Activity","Title","Priority","Duedate","actions"],this.createddates=u_createddate,this.duedates=u_createddate,this.statuses=u_status,this.type=u_types,this.entryTypes=u_entrytype,this.geographys=u_geography,this.scopes=u_scope,this.priorities=u_priority,this.created=u_createdby,this.assign=u_assignedto,this.groupBy=u_groupby,this.sortBy=u_sortby,this.activitylist=[],this.filter=L.t,this.customPage=it.Z,this.isSuperAdmin=!1,this.selectedTab={tab:{textLabel:L.t.IS_ACTIVE}},this.selection=new et.Ov(!0,[]),this.filters={types:[],status:[],entryType:[]},this.fromDate=new c.cw({start:new c.NI(new Date(x,b,13)),end:new c.NI(new Date(x,b,16))}),this.toDate=new c.cw({start:new c.NI(new Date(x,b,15)),end:new c.NI(new Date(x,b,19))})}ngOnInit(){this.getAllActivities(),this.getAcivityMasterData(),this.isSuperAdmin=this.storageService.getDataFromLocalStorage(F.I.ROLE)===at.G.SuperAdmin}downloadFile(){}isAllSelected(){const i=this.dataSource?.data.length;return this.selection.selected.length===i}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}checkboxLabel(e){return e?`${this.selection.isSelected(e)?"deselect":"select"} row ${e.position+1}`:(this.isAllSelected()?"deselect":"select")+" all"}getAllActivities(){this.activityService.getAllActivities().subscribe(e=>{this.dataSource=new d.by(e.data),this.dataSource.paginator=this.paginator})}ngAfterViewInit(){this.dataSource&&(this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort)}onChangedPageSize(e){console.log(e)}sortChange(e){console.log(e)}getAcivityMasterData(){this.activityService.getActivityMastarData().subscribe(e=>{e.data&&(this.masterData=e.data)})}entryTypeChanged(e){if(e.checked)this.filters.entryType.push(e.source.value);else{let i=this.filters.entryType.findIndex(n=>n===e.source.value);this.filters.entryType.splice(i,1)}console.log(this.filters)}geographyChanged(e){if(e.checked)this.filters.status.push(e.source.value);else{let i=this.filters.status.findIndex(n=>n===e.source.value);this.filters.status.splice(i,1)}console.log(this.filters)}typeChanged(e){if(e.checked)this.filters.types.push(e.source.value);else{let i=this.filters.types.findIndex(n=>n===e.source.value);this.filters.types.splice(i,1)}}activityDetails(e){console.log(e),this.router.navigate([I.p.ACTIVITY_DETAILS],{queryParams:{aId:e}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(N),t.Y36(B.V),t.Y36(_.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-activity"]],viewQuery:function(e,i){if(1&e&&(t.Gf(R.NW,5),t.Gf(k.YE,5)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:126,vars:37,consts:[[1,"text-end"],[1,"btn","btn-secondary","mx-1",3,"click"],[1,"icon-taskdownl"],["mat-button","",3,"matMenuTriggerFor"],["filters","matMenu"],["mat-menu-item","",3,"matMenuTriggerFor"],["createddate","matMenu"],[3,"click",4,"ngFor","ngForOf"],["duedate","matMenu"],[3,"click"],["aria-labelledby","example-radio-group-label",1,"example-radio-group"],["class","example-radio-button",3,"value",4,"ngFor","ngForOf"],[3,"formGroup","rangePicker","comparisonStart","comparisonEnd"],["matStartDate","","placeholder","Start date","formControlName","start"],["matEndDate","","placeholder","End date","formControlName","end"],["matSuffix","",3,"for"],["campaignOnePicker",""],["status","matMenu"],["types","matMenu"],["class","example-section",4,"ngFor","ngForOf"],["entrytype","matMenu"],["geography","matMenu"],["scope","matMenu"],["priority","matMenu"],["createdby","matMenu"],["assignto","matMenu"],["groupBymenu","matMenu"],[4,"ngFor","ngForOf"],["sortby","matMenu"],["mat-tab-label",""],[4,"ngIf"],["mat-table","","matSort","",1,"mat-elevation-z8","userTable",3,"dataSource","matSortChange"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Activity"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["matColumnDef","Title"],["matColumnDef","Priority"],["matColumnDef","Duedate"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSize","length","pageSizeOptions","page"],["paginator",""],[1,"example-section"],[1,"example-margin"],[1,"example-radio-button",3,"value"],[1,"example-margin",3,"value","change"],[1,"example-margin",3,"value"],["mat-header-cell",""],[3,"checked","indeterminate","aria-label","change"],["mat-cell",""],[3,"checked","aria-label","click","change"],["mat-header-cell","","mat-sort-header",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){if(1&e&&(t._UZ(0,"div"),t.TgZ(1,"div",0)(2,"span")(3,"div",1),t.NdJ("click",function(){return i.downloadFile()}),t._UZ(4,"i",2),t.TgZ(5,"mat-icon"),t._uU(6,"file_download"),t.qZA()()(),t.TgZ(7,"button",3),t._uU(8,"Filters"),t.TgZ(9,"mat-icon"),t._uU(10,"filter_alt"),t.qZA()(),t.TgZ(11,"mat-menu",null,4)(13,"button",5),t._uU(14,"Created Date"),t.qZA(),t.TgZ(15,"button",5),t._uU(16,"Due Date"),t.qZA(),t.TgZ(17,"button",5),t._uU(18,"Status"),t.qZA(),t.TgZ(19,"button",5),t._uU(20,"Types"),t.qZA(),t.TgZ(21,"button",5),t._uU(22,"Entry Type"),t.qZA(),t.TgZ(23,"button",5),t._uU(24,"Geography"),t.qZA(),t.TgZ(25,"button",5),t._uU(26,"Scope"),t.qZA(),t.TgZ(27,"button",5),t._uU(28,"Priority"),t.qZA(),t.TgZ(29,"button",5),t._uU(30,"Created by"),t.qZA(),t.TgZ(31,"button",5),t._uU(32,"Assigned to"),t.qZA()(),t.TgZ(33,"mat-menu",null,6),t.YNc(35,nt,4,1,"div",7),t.qZA(),t.TgZ(36,"mat-menu",null,8)(38,"div",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.TgZ(39,"mat-radio-group",10),t.YNc(40,st,2,2,"mat-radio-button",11),t.qZA(),t.TgZ(41,"mat-label"),t._uU(42,"From Date"),t.qZA(),t.TgZ(43,"mat-label"),t._uU(44,"To Date"),t.qZA(),t.TgZ(45,"mat-date-range-input",12),t._UZ(46,"input",13)(47,"input",14),t.qZA(),t.TgZ(48,"mat-hint"),t._uU(49,"MM/DD/YYYY"),t.qZA(),t._UZ(50,"mat-datepicker-toggle",15)(51,"mat-date-range-picker",null,16),t.qZA()(),t.TgZ(53,"mat-menu",null,17),t.YNc(55,rt,4,1,"div",7),t.qZA(),t.TgZ(56,"mat-menu",null,18)(58,"div",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.YNc(59,ct,3,2,"section",19),t.qZA()(),t.TgZ(60,"mat-menu",null,20)(62,"div",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.YNc(63,lt,3,2,"section",19),t.qZA()(),t.TgZ(64,"mat-menu",null,21)(66,"div",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.YNc(67,pt,3,2,"section",19),t.qZA()(),t.TgZ(68,"mat-menu",null,22)(70,"div",9),t.NdJ("click",function(s){return s.stopPropagation()}),t.YNc(71,mt,3,2,"section",19),t.qZA()(),t.TgZ(72,"mat-menu",null,23),t.YNc(74,ut,4,1,"div",7),t.qZA(),t.TgZ(75,"mat-menu",null,24),t.YNc(77,dt,4,1,"div",7),t.qZA(),t.TgZ(78,"mat-menu",null,25),t.YNc(80,gt,4,1,"div",7),t.qZA(),t.TgZ(81,"button",3),t._uU(82,"Group By "),t.TgZ(83,"mat-icon"),t._uU(84,"filter_list"),t.qZA()(),t.TgZ(85,"mat-menu",null,26),t.YNc(87,yt,2,1,"mat-option",27),t.qZA(),t.TgZ(88,"button",3),t._uU(89,"Sort By"),t.TgZ(90,"mat-icon"),t._uU(91,"sort"),t.qZA()(),t.TgZ(92,"mat-menu",null,28),t.YNc(94,vt,2,1,"mat-option",27),t.qZA()(),t.TgZ(95,"mat-tab-group")(96,"mat-tab"),t.YNc(97,_t,3,0,"ng-template",29),t.qZA(),t.TgZ(98,"mat-tab"),t.YNc(99,ht,3,0,"ng-template",29),t.qZA(),t.TgZ(100,"mat-tab"),t.YNc(101,ft,3,0,"ng-template",29),t.qZA(),t.YNc(102,Tt,3,0,"div",30),t.qZA(),t.TgZ(103,"table",31),t.NdJ("matSortChange",function(s){return i.sortChange(s)}),t.ynx(104,32),t.YNc(105,Zt,2,3,"th",33),t.YNc(106,Dt,2,2,"td",34),t.BQk(),t.ynx(107,35),t.YNc(108,Ct,2,0,"th",36),t.YNc(109,bt,2,1,"td",34),t.BQk(),t.ynx(110,37),t.YNc(111,xt,2,0,"th",36),t.YNc(112,Nt,2,1,"td",34),t.BQk(),t.ynx(113,38),t.YNc(114,St,2,0,"th",36),t.YNc(115,qt,2,1,"td",34),t.BQk(),t.ynx(116,39),t.YNc(117,Ut,2,0,"th",36),t.YNc(118,kt,3,4,"td",34),t.BQk(),t.ynx(119,40),t.YNc(120,Ft,2,0,"th",36),t.YNc(121,Mt,3,0,"td",34),t.BQk(),t.YNc(122,Jt,1,0,"tr",41),t.YNc(123,Ot,1,0,"tr",42),t.qZA(),t.TgZ(124,"mat-paginator",43,44),t.NdJ("page",function(s){return i.onChangedPageSize(s)}),t.qZA()),2&e){const n=t.MAs(12),s=t.MAs(34),l=t.MAs(37),g=t.MAs(52),f=t.MAs(54),O=t.MAs(57),te=t.MAs(61),ee=t.MAs(65),ie=t.MAs(69),ae=t.MAs(73),oe=t.MAs(76),ne=t.MAs(79),se=t.MAs(86),re=t.MAs(93);t.xp6(7),t.Q6J("matMenuTriggerFor",n),t.xp6(6),t.Q6J("matMenuTriggerFor",s),t.xp6(2),t.Q6J("matMenuTriggerFor",l),t.xp6(2),t.Q6J("matMenuTriggerFor",f),t.xp6(2),t.Q6J("matMenuTriggerFor",O),t.xp6(2),t.Q6J("matMenuTriggerFor",te),t.xp6(2),t.Q6J("matMenuTriggerFor",ee),t.xp6(2),t.Q6J("matMenuTriggerFor",ie),t.xp6(2),t.Q6J("matMenuTriggerFor",ae),t.xp6(2),t.Q6J("matMenuTriggerFor",oe),t.xp6(2),t.Q6J("matMenuTriggerFor",ne),t.xp6(4),t.Q6J("ngForOf",i.createddates),t.xp6(5),t.Q6J("ngForOf",i.duedates),t.xp6(5),t.Q6J("formGroup",i.fromDate)("rangePicker",g)("comparisonStart",i.toDate.value.start)("comparisonEnd",i.toDate.value.end),t.xp6(5),t.Q6J("for",g),t.xp6(5),t.Q6J("ngForOf",i.statuses),t.xp6(4),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityTypesData),t.xp6(4),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityEntryTypesData),t.xp6(4),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activitySectorsData),t.xp6(4),t.Q6J("ngForOf",null==i.masterData?null:i.masterData.activityScopesData),t.xp6(3),t.Q6J("ngForOf",i.priorities),t.xp6(3),t.Q6J("ngForOf",i.created),t.xp6(3),t.Q6J("ngForOf",i.assign),t.xp6(1),t.Q6J("matMenuTriggerFor",se),t.xp6(6),t.Q6J("ngForOf",i.groupBy),t.xp6(1),t.Q6J("matMenuTriggerFor",re),t.xp6(6),t.Q6J("ngForOf",i.sortBy),t.xp6(8),t.Q6J("ngIf",i.isSuperAdmin),t.xp6(1),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("pageSize",i.customPage.pageSize)("length",i.activitylist.length)("pageSizeOptions",i.customPage.pageSizeOptions)}},dependencies:[p.sg,p.O5,c.Fj,c.JJ,c.JL,c.sg,c.u,q.ey,U.lW,ot.oG,y.nW,y.wx,y.zY,y.By,y._g,D.Hw,v.bx,v.hX,v.R9,h.VK,h.OP,h.p6,R.NW,C.VQ,C.U0,k.YE,k.nU,d.BZ,d.fO,d.as,d.w1,d.Dz,d.nj,d.ge,d.ev,d.XQ,d.Gk,M.SP,M.uD,M.uX,p.uU],styles:["md-select[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:1px solid #666666}.userTable[_ngcontent-%COMP%]{width:100%}.userTable[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{background-color:#818dcf;color:#fff}.userTable[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{background:whitesmoke}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid rgb(206,202,202)}.example-section[_ngcontent-%COMP%]{margin:12px 0}.example-margin[_ngcontent-%COMP%]{margin:0 12px}.example-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0;align-items:flex-start}.example-radio-button[_ngcontent-%COMP%]{margin:5px}.blue-color[_ngcontent-%COMP%]{color:#00f}"]}),a})();var zt=r(4128),Pt=r(2137),J=r(7331);function Qt(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.organization)}}function wt(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"mat-form-field",4)(2,"mat-label"),t._uU(3,"organizations"),t.qZA(),t.TgZ(4,"mat-select",21),t.YNc(5,Qt,2,2,"mat-option",6),t.qZA()(),t.BQk()),2&a){const e=t.oxw();t.xp6(5),t.Q6J("ngForOf",null==e.userDetails?null:e.userDetails.organizationsdata)}}function Yt(a,o){if(1&a&&(t.ynx(0),t.TgZ(1,"h3"),t._uU(2),t.qZA(),t.BQk()),2&a){const e=t.oxw();t.xp6(2),t.Oqu(null==e.userDetails?null:e.userDetails.Name)}}function Et(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function Rt(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function Lt(a,o){1&a&&(t.TgZ(0,"mat-icon",25),t._uU(1,"cancel"),t.qZA())}function Bt(a,o){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",23),t.NdJ("removed",function(){const s=t.CHM(e).index,l=t.oxw();return t.KtG(l.removeChip(s))}),t._uU(1),t.YNc(2,Lt,2,0,"mat-icon",24),t.qZA()}if(2&a){const e=o.$implicit,i=t.oxw();t.Q6J("removable",i.removable),t.xp6(1),t.hij(" ",e.organization," "),t.xp6(1),t.Q6J("ngIf",i.removable)}}function $t(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e.organization)}}function Ht(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function Vt(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}function jt(a,o){if(1&a&&(t.TgZ(0,"mat-option",22),t._uU(1),t.qZA()),2&a){const e=o.$implicit;t.Q6J("value",e._id),t.xp6(1),t.Oqu(e.name)}}const Gt=[{path:"",component:It},{path:"create",component:(()=>{class a{constructor(e,i,n,s,l,g,f){this.organizationService=e,this.formBuilder=i,this.activityService=n,this.alertpopupService=s,this.storageService=l,this.activatedRoute=g,this.userDetailsService=f,this.removable=!0,this.filesListArray=[],this.priority=T,this.status=Z,this.activatedRoute.queryParams.subscribe(O=>{this.selectedActivityId=O.aId,console.log(this.selectedActivityId)})}ngOnInit(){this.generateAddNewUserForm(),this.getUserDetails(),this.selectedActivityId?this.forkJoinResult():(this.getAllOrganization(),this.getActivityMasterData())}forkJoinResult(){(0,zt.D)([this.organizations$,this.activityMasterData$,this.activity$]).subscribe(e=>{this.organizationsData=e[0].organizations;const i=e[0].organizations.filter(n=>e[2].data[0].organizationData.find(s=>s._id===n._id));this.activityTypesData=e[1].data.activityTypesData,this.activityRelatedTypesData=e[1].data.activityRelatedTypesData,this.activityEntryTypesData=e[1].data.activityEntryTypesData,this.activitySectorsData=e[1].data.activitySectorsData,this.activityScopesData=e[1].data.activityScopesData,this.selectedActivityData=e[2].data[0],this.activityForm.controls.activityType.setValue(this.selectedActivityData.activityType),this.activityForm.controls.activityRelatedTo.setValue(this.selectedActivityData.activityRelatedTo),this.activityForm.controls.organization?.setValue(i),this.activityForm.controls.activitEntryType.setValue(this.selectedActivityData.activitEntryType),this.activityForm.controls.activitySector.setValue(this.selectedActivityData.activitySector),this.activityForm.controls.activityScope.setValue(this.selectedActivityData.activityScope),this.activityForm.controls.title.setValue(this.selectedActivityData.title),this.activityForm.controls.attachments.setValue(this.selectedActivityData.attachments)})}get organizations$(){return this.organizationService.getAllOrganizations()}getAllOrganization(){this.organizations$.subscribe(e=>{this.organizationsData=e.organizations,this.organizationList=e.organizations})}get activityMasterData$(){return this.activityService.getActivitiesMasterData()}getActivityMasterData(){this.activityService.getActivitiesMasterData().subscribe(e=>{this.activityTypesData=e.data.activityTypesData,this.activityRelatedTypesData=e.data.activityRelatedTypesData,this.activityEntryTypesData=e.data.activityEntryTypesData,this.activitySectorsData=e.data.activitySectorsData,this.activityScopesData=e.data.activityScopesData})}generateAddNewUserForm(){this.activityForm=this.formBuilder.group({activityType:["",m.kI.required],activityRelatedTo:["",m.kI.required],organization:["",m.kI.required],activitEntryType:["",m.kI.required],activitySector:["",m.kI.required],activityScope:["",m.kI.required],title:["",m.kI.required],description:["",m.kI.required],attachments:["",m.kI.required],createdByOrganization:["",m.kI.required]})}get activity$(){return this.activityService.getActivityById(this.selectedActivityId)}onSubmit(){if(this.selectedActivityId){const e={...this.activityForm.value,attachments:this.filesListArray,organization:this.selectedOrganizationValue,priority:T[0],status:Z[0],createdBy:this.storageService.getDataFromLocalStorage(F.I.USER_ID)};this.activityService.updateActivity(this.selectedActivityId,e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity updated Successfully",action:"ok"})},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}else{this.selectedOrganizationValue=this.activityForm.get("organization")?.value.map(i=>i._id);const e={...this.activityForm.value,attachments:this.filesListArray,organization:this.selectedOrganizationValue,priority:T[0],status:Z[0],description:this.descriptionOfTextEditor,createdBy:this.storageService.getDataFromLocalStorage(F.I.USER_ID)};this.activityService.postActivity(e).subscribe(i=>{this.alertpopupService.open({message:i.message?i.message:"Activity Created Successfully",action:"ok"})},i=>{this.alertpopupService.open({message:i.message?i.message:"something went wrong!",action:"ok"})})}}relatedValue(e){"Multiple Ministries/Departments"===e.value&&(this.isMultipleOrganization=!1)}removeChip(e){let i=this.activityForm.controls.organization;i.value.splice(e,1),this.activityForm.controls.organization?.setValue(i.value)}removeFileChip(e){this.filesListArray.splice(e,1)}getUserDetails(){this.userDetailsService.getUserDetails().subscribe(e=>{this.userDetails=e,1===this.userDetails?.organization?.length&&this.activityForm?.controls.createdByOrganization?.setValue(this.userDetails?.organization[0])})}updatedDescription(e){this.descriptionOfTextEditor=e}updatedFilesDescription(e){for(var i=0;i<e.length;i++)this.filesListArray.push({name:e[i].name,size:e[i].size.toString(),path:"string"})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(z.M),t.Y36(c.qu),t.Y36(N),t.Y36(S.z),t.Y36(B.V),t.Y36(_.gz),t.Y36(Pt.H))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-createactivity"]],decls:63,vars:10,consts:[[1,"container"],[1,"d-flex"],[3,"formGroup","ngSubmit"],[4,"ngIf"],["appearance","outline"],["formControlName","activityType"],[3,"value",4,"ngFor","ngForOf"],["formControlName","activityRelatedTo"],[3,"removable","removed",4,"ngFor","ngForOf"],[1,"mx-5"],["appearance","outline",1,"w-100-per"],["multiple","multiple","formControlName","organization"],["formControlName","activitEntryType"],["formControlName","activitySector"],["formControlName","activityScope"],[1,"row"],[1,"col-12"],["matInput","","placeholder","Add an activity here & hit enter...","input","","type","text","formControlName","title"],["value","",3,"updatedDescription"],[3,"updatedFilesDescription"],["mat-raised-button","","color","primary","type","submit"],["formControlName","createdByOrganization"],[3,"value"],[3,"removable","removed"],["matChipRemove","",4,"ngIf"],["matChipRemove",""]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon"),t._uU(3," note_add"),t.qZA(),t.TgZ(4,"h2"),t._uU(5,"Create Activity"),t.qZA()(),t.TgZ(6,"form",2),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(7,"div"),t.YNc(8,wt,6,1,"ng-container",3),t.YNc(9,Yt,3,1,"ng-container",3),t.qZA(),t.TgZ(10,"div")(11,"mat-form-field",4)(12,"mat-label"),t._uU(13,"Type"),t.qZA(),t.TgZ(14,"mat-select",5),t.YNc(15,Et,2,2,"mat-option",6),t.qZA()()(),t.TgZ(16,"div",1)(17,"div")(18,"mat-form-field",4)(19,"mat-label"),t._uU(20,"Related To"),t.qZA(),t.TgZ(21,"mat-select",7),t.YNc(22,Rt,2,2,"mat-option",6),t.qZA()()(),t.TgZ(23,"div")(24,"mat-chip-list"),t.YNc(25,Bt,3,3,"mat-chip",8),t.qZA()(),t.TgZ(26,"div",9)(27,"mat-form-field",10)(28,"mat-label"),t._uU(29,"Ministry/Department"),t.qZA(),t.TgZ(30,"mat-select",11),t.YNc(31,$t,2,2,"mat-option",6),t.qZA()()()(),t.TgZ(32,"div")(33,"mat-form-field",4)(34,"mat-label"),t._uU(35,"Entry Type"),t.qZA(),t.TgZ(36,"mat-select",12),t.YNc(37,Ht,2,2,"mat-option",6),t.qZA()()(),t.TgZ(38,"div",1)(39,"div")(40,"mat-form-field",4)(41,"mat-label"),t._uU(42,"Sector"),t.qZA(),t.TgZ(43,"mat-select",13),t.YNc(44,Vt,2,2,"mat-option",6),t.qZA()()(),t.TgZ(45,"div",9)(46,"mat-form-field",4)(47,"mat-label"),t._uU(48,"Scope"),t.qZA(),t.TgZ(49,"mat-select",14),t.YNc(50,jt,2,2,"mat-option",6),t.qZA()()()(),t.TgZ(51,"div",15)(52,"mat-form-field",4)(53,"mat-label"),t._uU(54,"Title"),t.qZA(),t.TgZ(55,"div",16),t._UZ(56,"input",17),t.qZA()()(),t.TgZ(57,"div")(58,"app-rich-text-editor",18),t.NdJ("updatedDescription",function(s){return i.updatedDescription(s)}),t.qZA()(),t.TgZ(59,"div")(60,"app-fileuploader",19),t.NdJ("updatedFilesDescription",function(s){return i.updatedFilesDescription(s)}),t.qZA()(),t.TgZ(61,"button",20),t._uU(62,"Submit"),t.qZA()()()),2&e){let n;t.xp6(6),t.Q6J("formGroup",i.activityForm),t.xp6(2),t.Q6J("ngIf",(null==i.userDetails||null==i.userDetails.organizationsdata?null:i.userDetails.organizationsdata.length)>1),t.xp6(1),t.Q6J("ngIf",1===(null==i.userDetails||null==i.userDetails.organizationsdata?null:i.userDetails.organizationsdata.length)),t.xp6(6),t.Q6J("ngForOf",i.activityTypesData),t.xp6(7),t.Q6J("ngForOf",i.activityRelatedTypesData),t.xp6(3),t.Q6J("ngForOf",null==(n=i.activityForm.get("organization"))?null:n.value),t.xp6(6),t.Q6J("ngForOf",i.organizationsData),t.xp6(6),t.Q6J("ngForOf",i.activityEntryTypesData),t.xp6(7),t.Q6J("ngForOf",i.activitySectorsData),t.xp6(6),t.Q6J("ngForOf",i.activityScopesData)}},dependencies:[p.sg,p.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,q.ey,U.lW,J.qn,J.HS,J.qH,D.Hw,v.KE,v.hX,Q.Nt,w.gD,Y,E],styles:[".container[_ngcontent-%COMP%]{background-color:#fff}"]}),a})()},{path:"details",component:tt}];let Wt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[_.Bz.forChild(Gt),_.Bz]}),a})();var Kt=r(9031);let Xt=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[p.ez,Wt,c.UX,Kt.m]}),a})()},8202:(H,A,r)=>{r.d(A,{t:()=>p});const p={IS_ACTIVE:2,MINISTRIES:1,ASSOCIATION:0,INACTIVE:3,MY_PROFILE:4,CHANGE_PASSWORD:5,NOTIFICATIONS:6,EMAIL_REPORTS:7}}}]);