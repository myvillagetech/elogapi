"use strict";(self.webpackChunkelog_web=self.webpackChunkelog_web||[]).push([[863],{5863:(b,l,c)=>{c.r(l),c.d(l,{DocumentsModule:()=>O});var d=c(6895),u=c(3060),r=c(8739),i=c(3626),p=c(5150),t=c(4650),h=c(3248);let f=(()=>{class e{constructor(n){this.httpDataService=n}postActivityAttachments(n){return this.httpDataService.post("activity/getAttchements",n)}}return e.\u0275fac=function(n){return new(n||e)(t.LFG(h.L))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=c(5641);function D(e,o){1&e&&(t.TgZ(0,"th",11),t._uU(1," Activity"),t.qZA())}function C(e,o){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",null==n?null:n.uniqIdentity," ")}}function v(e,o){1&e&&(t.TgZ(0,"th",11),t._uU(1," FileName "),t.qZA())}function y(e,o){if(1&e){const n=t.EpF();t.TgZ(0,"td",13),t.NdJ("click",function(){const s=t.CHM(n).$implicit,U=t.oxw();return t.KtG(U.downloadDocumement(s))}),t._uU(1),t.qZA()}if(2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",null==n||null==n.nestedAttchments?null:n.nestedAttchments.name," ")}}function A(e,o){1&e&&(t.TgZ(0,"th",11),t._uU(1," Size "),t.qZA())}function S(e,o){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",null==n||null==n.nestedAttchments?null:n.nestedAttchments.size," ")}}function T(e,o){1&e&&(t.TgZ(0,"th",11),t._uU(1," Organisation "),t.qZA())}function _(e,o){if(1&e&&(t.TgZ(0,"td",12),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",null==n||null==n.assignToObj?null:n.assignToObj.organization," ")}}function w(e,o){1&e&&t._UZ(0,"tr",14)}function z(e,o){1&e&&t._UZ(0,"tr",15)}const Z=[{path:"",component:(()=>{class e{constructor(n,a){this.documentsService=n,this.activityService=a,this.totalUserCount=0,this.paginationProps=p.k,this.attachmentsDetails=[],this.documentsPayload={pageNumber:0,pageSize:10,sortField:"",groupBy:0,fileNameSearchText:""},this.displayedColumns=["Activity","FileName","Size","Organisation"],this.dataSource=new i.by(this.attachmentsDetails)}ngOnInit(){this.postActivityAttachments()}postActivityAttachments(){this.documentsService.postActivityAttachments(this.documentsPayload).subscribe(n=>{this.attachmentsDetails=n?.data[0]?.attachments,this.totalDocumentCount=n?.data[0]?.count[0]?.count,this.dataSource=new i.by(this.attachmentsDetails)})}onChangedPageSize(n){this.documentsPayload.pageNumber=this.paginator?.pageIndex,this.documentsPayload.pageSize=this.paginator?.pageSize,this.postActivityAttachments()}ngAfterViewInit(){this.dataSource.paginator=this.paginator}downloadDocumement(n){const a={fileName:n.nestedAttchments.name,path:`${n._id}`};n.nestedAttchments.activityLogId&&(a.path=`${n._id}/${n.nestedAttchments.activityLogId}`),this.activityService.dowloadAttachments(a).subscribe(m=>{const s=document.createElement("a");s.href=window.URL.createObjectURL(m),s.download=n.nestedAttchments.name,s.click(),window.URL.revokeObjectURL(s.href)},m=>{})}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f),t.Y36(g.M))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-documents"]],viewQuery:function(n,a){if(1&n&&t.Gf(r.NW,5),2&n){let m;t.iGM(m=t.CRH())&&(a.paginator=m.first)}},decls:16,vars:6,consts:[["mat-table","",1,"mat-elevation-z8","documentTable",3,"dataSource"],["matColumnDef","Activity"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","FileName"],["mat-cell","","class","attachment-download",3,"click",4,"matCellDef"],["matColumnDef","Size"],["matColumnDef","Organisation"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page of GitHub search results",3,"length","pageSize","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],["mat-cell","",1,"attachment-download",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,a){1&n&&(t.TgZ(0,"table",0),t.ynx(1,1),t.YNc(2,D,2,0,"th",2),t.YNc(3,C,2,1,"td",3),t.BQk(),t.ynx(4,4),t.YNc(5,v,2,0,"th",2),t.YNc(6,y,2,1,"td",5),t.BQk(),t.ynx(7,6),t.YNc(8,A,2,0,"th",2),t.YNc(9,S,2,1,"td",3),t.BQk(),t.ynx(10,7),t.YNc(11,T,2,0,"th",2),t.YNc(12,_,2,1,"td",3),t.BQk(),t.YNc(13,w,1,0,"tr",8),t.YNc(14,z,1,0,"tr",9),t.qZA(),t.TgZ(15,"mat-paginator",10),t.NdJ("page",function(s){return a.onChangedPageSize(s)}),t.qZA()),2&n&&(t.Q6J("dataSource",a.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",a.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",a.displayedColumns),t.xp6(1),t.Q6J("length",a.totalDocumentCount)("pageSize",a.paginationProps.pageSize)("pageSizeOptions",a.paginationProps.pageSizeOptions))},dependencies:[r.NW,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk],styles:[".documentTable[_ngcontent-%COMP%]{width:100%}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;font-size:1rem;background:#f0f0f0}.attachment-download[_ngcontent-%COMP%]{cursor:pointer;color:#00f;text-decoration:underline}"]}),e})()}];let N=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.Bz.forChild(Z),u.Bz]}),e})();var x=c(1252);let O=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.ez,N,x.m]}),e})()}}]);