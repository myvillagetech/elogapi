"use strict";(self.webpackChunkelog_web=self.webpackChunkelog_web||[]).push([[713],{713:(H,v,a)=>{a.r(v),a.d(v,{ArchiveModule:()=>L});var m=a(6895),d=a(3060),p=a(5017),s=a(3626),g=a(7030),e=a(4650),A=a(3248);let f=(()=>{class i{constructor(t){this.httpDataService=t}getArchiveActivities(){return this.httpDataService.get("activity/archive/activities")}postRestoreSelectedActivities(t){return this.httpDataService.post("activity/archive/multiple",t)}postDeleteSelectedActivities(t){return this.httpDataService.post("activity/delete/multiple",t)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.L))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var _=a(2653),C=a(4859),T=a(3546),x=a(6709),b=a(7392),u=a(8255),h=a(3848);function Z(i,c){1&i&&(e.TgZ(0,"div",18)(1,"mat-icon"),e._uU(2,"assignment"),e.qZA(),e._uU(3," Tasks "),e.qZA())}function S(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"th",19)(1,"mat-checkbox",20),e.NdJ("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(o?l.masterToggle():null)}),e.qZA(),e.TgZ(2,"button",21)(3,"mat-icon"),e._uU(4,"arrow_drop_down"),e.qZA()()()}if(2&i){const t=e.oxw(),n=e.MAs(28);e.xp6(1),e.Q6J("checked",t.selection.hasValue()&&t.isAllSelected())("indeterminate",t.selection.hasValue()&&!t.isAllSelected()),e.xp6(1),e.Q6J("disabled",0===t.selection.selected.length)("matMenuTriggerFor",n)}}function k(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td",22)(1,"mat-checkbox",23),e.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const r=e.CHM(t).$implicit,q=e.oxw();return e.KtG(o?q.selection.toggle(r):null)}),e.qZA()()}if(2&i){const t=c.$implicit,n=e.oxw();e.xp6(1),e.Q6J("checked",n.selection.isSelected(t))}}function y(i,c){1&i&&(e.TgZ(0,"th",19),e._uU(1," Activity "),e.qZA())}function D(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.navigateToActivityDetails(l._id))}),e._uU(1),e.qZA()}if(2&i){const t=c.$implicit;e.xp6(1),e.hij(" ",t.uniqIdentity?t.uniqIdentity:t.createdByOrganizationData[0].shortName," ")}}function M(i,c){1&i&&(e.TgZ(0,"th",19),e._uU(1," Title "),e.qZA())}function w(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"td",24),e.NdJ("click",function(){const l=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.navigateToActivityDetails(l._id))}),e._uU(1),e.qZA()}if(2&i){const t=c.$implicit;e.xp6(1),e.hij(" ",t.title," ")}}function N(i,c){1&i&&(e.TgZ(0,"th",25),e._uU(1," Status "),e.qZA())}const O=function(i,c,t,n){return{"badge-not-admissible":i,"badge-resolved":c,"badge-in-progress":t,"badge-new":n}};function U(i,c){if(1&i&&(e.TgZ(0,"td",26)(1,"span",27),e._uU(2),e.ALo(3,"titlecase"),e.qZA()()),2&i){const t=c.$implicit;e.xp6(1),e.Q6J("ngClass",e.l5B(4,O,"rejected"===(null==t?null:t.status.toLowerCase()),"resolved"===(null==t?null:t.status.toLowerCase()),"inprogress"===(null==t?null:t.status.toLowerCase()),"new"===(null==t?null:t.status.toLowerCase()))),e.xp6(1),e.hij(" ",e.lcZ(3,2,t.status)," ")}}function Y(i,c){1&i&&(e.TgZ(0,"th",19),e._uU(1," Organisation "),e.qZA())}function F(i,c){if(1&i&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&i){const t=c.$implicit;e.xp6(1),e.hij("",t.createdByOrganizationData[0].organization," ")}}function J(i,c){1&i&&e._UZ(0,"tr",28)}function P(i,c){1&i&&e._UZ(0,"tr",29)}function R(i,c){1&i&&(e.TgZ(0,"div")(1,"mat-card",15),e._uU(2," No Archived Activities found "),e.qZA()())}function z(i,c){if(1&i){const t=e.EpF();e.TgZ(0,"div",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.logSelection())}),e.TgZ(1,"mat-icon"),e._uU(2,"attachment"),e.qZA(),e._uU(3," Files "),e.qZA()}}const Q=[{path:"",component:(()=>{class i{constructor(t,n,o){this.archiveService=t,this.router=n,this.alertpopupService=o,this.archiveActivitiesList=[],this.taskDisplayedColumns=["checkbox","Activity","Title","Status","Organisation"],this.fileDisplayedColumns=["Activity","FileName","Size","Organization"],this.dataSource=new s.by(this.archiveActivitiesList),this.selection=new p.Ov(!0,[])}ngOnInit(){this.getArchiveActivities()}getArchiveActivities(){this.archiveService.getArchiveActivities().subscribe(t=>{this.archiveActivitiesList=t.data,this.dataSource=new s.by(this.archiveActivitiesList)})}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}masterToggle(){this.isAllSelected()?this.selection.clear():this.dataSource.data.forEach(t=>this.selection.select(t))}logSelection(){this.selection.selected.forEach(t=>{})}navigateToActivityDetails(t){this.router.navigate([g.p.ACTIVITY_DETAILS],{queryParams:{aId:t}})}archiveActionClick(t){if("Restore"===t){const n={activityIds:this.selection.selected.map(o=>o._id),isArchive:!1};this.archiveService.postRestoreSelectedActivities(n).subscribe(o=>{o&&(this.alertpopupService.open({message:o?.message?o?.message:"Activities archived successfully",action:"ok"}),this.getArchiveActivities())},o=>{this.alertpopupService.open({message:o?.message?o?.message:"Failed to archive Activities  ",action:"ok"})})}else"Remove"===t&&this.archiveService.postDeleteSelectedActivities({activityIds:this.selection.selected.map(n=>n._id)}).subscribe(n=>{n&&(this.alertpopupService.open({message:n?.message?n?.message:"Activities removed successfully",action:"ok"}),this.getArchiveActivities())},n=>{this.alertpopupService.open({message:n?.message?n?.message:"Failed to remove Activities  ",action:"ok"})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(f),e.Y36(d.F0),e.Y36(_.z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-archive"]],decls:39,vars:4,consts:[["mat-tab-label",""],["mat-table","",1,"mat-elevation-z8","archiveTable",3,"dataSource"],["matColumnDef","checkbox"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Activity"],["mat-cell","","class","cursor",3,"click",4,"matCellDef"],["matColumnDef","Title"],["matColumnDef","Status"],["mat-header-cell","","class","status-badge",4,"matHeaderCellDef"],["mat-cell","","class","status-badge",4,"matCellDef"],["matColumnDef","Organisation"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[4,"ngIf"],[1,"noTask-message"],["menu","matMenu"],["mat-menu-item","",3,"click"],[1,"d-flex","align-items-center","gap-1"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"disabled","matMenuTriggerFor"],["mat-cell",""],[3,"checked","click","change"],["mat-cell","",1,"cursor",3,"click"],["mat-header-cell","",1,"status-badge"],["mat-cell","",1,"status-badge"],[1,"badge",3,"ngClass"],["mat-header-row",""],["mat-row",""],[1,"d-flex","align-items-center","gap-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-tab-group")(1,"mat-tab"),e.YNc(2,Z,4,0,"ng-template",0),e.TgZ(3,"table",1),e.ynx(4,2),e.YNc(5,S,5,4,"th",3),e.YNc(6,k,2,1,"td",4),e.BQk(),e.ynx(7,5),e.YNc(8,y,2,0,"th",3),e.YNc(9,D,2,1,"td",6),e.BQk(),e.ynx(10,7),e.YNc(11,M,2,0,"th",3),e.YNc(12,w,2,1,"td",6),e.BQk(),e.ynx(13,8),e.YNc(14,N,2,0,"th",9),e.YNc(15,U,4,9,"td",10),e.BQk(),e.ynx(16,11),e.YNc(17,Y,2,0,"th",3),e.YNc(18,F,2,1,"td",4),e.BQk(),e.YNc(19,J,1,0,"tr",12),e.YNc(20,P,1,0,"tr",13),e.qZA(),e.YNc(21,R,3,0,"div",14),e.qZA(),e.TgZ(22,"mat-tab"),e.YNc(23,z,4,0,"ng-template",0),e.TgZ(24,"div")(25,"mat-card",15),e._uU(26," No Files found "),e.qZA()()()(),e.TgZ(27,"mat-menu",null,16)(29,"button",17),e.NdJ("click",function(){return n.archiveActionClick("Restore")}),e.TgZ(30,"mat-icon"),e._uU(31,"refresh"),e.qZA(),e.TgZ(32,"span"),e._uU(33,"Restore"),e.qZA()(),e.TgZ(34,"button",17),e.NdJ("click",function(){return n.archiveActionClick("Remove")}),e.TgZ(35,"mat-icon"),e._uU(36,"delete"),e.qZA(),e.TgZ(37,"span"),e._uU(38,"Remove"),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("dataSource",n.dataSource),e.xp6(16),e.Q6J("matHeaderRowDef",n.taskDisplayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.taskDisplayedColumns),e.xp6(1),e.Q6J("ngIf",0===(null==n.dataSource||null==n.dataSource.filteredData?null:n.dataSource.filteredData.length)))},dependencies:[m.mk,m.O5,C.lW,T.a8,x.oG,b.Hw,u.VK,u.OP,u.p6,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,h.SP,h.uD,h.uX,m.rS],styles:[".archiveTable[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%]{background-color:#f0f0f0;font-size:1em}.badge[_ngcontent-%COMP%], .badge-resolved[_ngcontent-%COMP%], .badge-not-admissible[_ngcontent-%COMP%], .badge-in-progress[_ngcontent-%COMP%], .badge-new[_ngcontent-%COMP%]{width:100px;color:#fff;text-align:center;padding:5px 9px;letter-spacing:.1em;font-weight:500;font-size:12px;border-radius:0;text-transform:capitalize}.badge-new[_ngcontent-%COMP%]{background-color:#ffae3ee0}.badge-in-progress[_ngcontent-%COMP%]{background-color:#012970c2}.badge-not-admissible[_ngcontent-%COMP%]{background-color:#ff4b3edb}.badge-resolved[_ngcontent-%COMP%]{background-color:#4bec81}.cursor[_ngcontent-%COMP%]{cursor:pointer}.noTask-message[_ngcontent-%COMP%]{text-align:center;color:#e90e0e}"]}),i})()}];let B=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.Bz.forChild(Q),d.Bz]}),i})();var I=a(1252);let L=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[m.ez,B,I.m]}),i})()}}]);